<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="application-name" content="Crypto Dash">
<meta name="description" content="Crypto Currency Tracker Dashboard">
<meta name="keywords" content="HTML, CSS, JavaScript, Crypto">
<meta name="author" content="Mihail-Vlad Prajescu">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Bootstrap 5.1.3 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" type="text/css">

<!-- Tom Select 2.0.0 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/css/tom-select.bootstrap5.min.css" type="text/css">

<!-- FontAwesome 4.6.3 CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" type="text/css"/>

<!-- Muuri 0.9.5 JS -->
<script src="https://cdn.jsdelivr.net/npm/muuri@0.9.5/dist/muuri.min.js"></script>

<!-- Web Animations 2.3.2 JS -->
<script src="https://cdn.jsdelivr.net/npm/web-animations-js@2.3.2/web-animations.min.js"></script>


<!-- Maybe implement themes in the future -->
<!-- Themes from https://bootswatch.com/ -->
<!--<link href="https://bootswatch.com/5/materia/bootstrap.min.css" rel="stylesheet">-->

<!-- // USD/GBP/EUR 
// Last hour comparison 
// 24 hours comparison-->

<title> Crypto Dash </title>

<style>

* {
    box-sizing: border-box;
}

body {
  
	font-family: sans-serif;
	margin: 40px;
	
}


/* Custom Bootstrap  

  .offcanvas {
    background-color: rgba(0, 0, 0, .50);
	backdrop-filter: blur(10px);
  
} */

:root {
  --cryptodash-main-bg-color: #282537;
  --cryptodash-gradient-bg-color-1: #3c3b52;
  --cryptodash-gradient-bg-color-2: #252233;
}


.cryptodash-bg-simple {
  background-size: 110%;
  background: #282537 no-repeat center fixed;  
  background-image: -webkit-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: -moz-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: -o-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
     
  background-size: cover;
}

.cryptodash-bg-custom {
  background-size: 110%;
  background: var(--cryptodash-main-bg-color) no-repeat center fixed; ;
  background-image: -webkit-radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-image: -moz-radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-image: -o-radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-image: radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-size: cover;
}

.cryptodash-bg-image-gradient-hd {
  background-size: 110%;
	background-color: #000;
	background: url(https://source.unsplash.com/1920x1080/?gradient) no-repeat center fixed;     
  background-size: cover;
}

.cryptodash-bg-image-abstract-hd {
  background-size: 110%;
	background-color: #000;
	background: url(https://source.unsplash.com/1920x1080/?abstract) no-repeat center fixed;     
  background-size: cover;
}

.cryptodash-bg-image-gradient-4k {
  background-size: 110%;
	background-color: #000;
	background: url(https://source.unsplash.com/3840x2160/?gradient) no-repeat center fixed;     
  background-size: cover;
}

.cryptodash-bg-image-abstract-4k {
  background-size: 110%;
	background-color: #000;
	background: url(https://source.unsplash.com/3840x2160/?abstract) no-repeat center fixed;     
  background-size: cover;
}




/* About Button in Crpyto Dash Side Bar */
#cryptodash-about{
  position: fixed;
  width: 370px;
  bottom: 5px;
}



/* *** GRID *** */

/* Grid style */
.cryptodash-grid {
  position: relative;
}

/* Tracker style */
.cryptodash-tracker {
  display: block;
  position: absolute;
  background: #ffffff;
  width: 420px;
  height: 420px;
  margin: 20px;
  padding: 10px;
  z-index: 1;
  border-radius: 20px;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}

/* Tracker content style */
.cryptodash-tracker-content {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Tracker Draging */
.cryptodash-tracker.muuri-item-dragging {
    z-index: 3;
}
.cryptodash-tracker.muuri-item-releasing {
    z-index: 2;
}
.cryptodash-tracker.muuri-item-hidden {
    z-index: 0;
}


/* *** Loader *** */

#cryptodash-loader{
  width:100px;
  height:80px;
  position:fixed;
  top:50%;
  left:50%;
  margin-top:-40px;
  margin-left:-50px;
}
  
.cryptodash-loader-inner{
  -webkit-animation:rotate 0.8s linear infinite;
  -moz-animation:rotate 0.8s linear infinite;
  animation:rotate 0.8s linear infinite;
  margin-top:20px;
  border-radius:50%;
  width:50px;
  height:50px;
  position:absolute;
}
  
.cryptodash-rotate-one{
  left:50%;
  margin-left:-25px;
  border-top:2px solid #1f6d8f;
}
  
.cryptodash-rotate-two{
  top:-10px;
  left:30px;
  border-left:2px solid #1f6d8f;
}
  
.cryptodash-rotate-three{
  top:-10px;
  right:30px;
  border-right:2px solid #1f6d8f;
}
  
@-webkit-keyframes rotate{
  0%{-webkit-transform:rotateZ(0deg);}
  100%{-webkit-transform:rotateZ(360deg);}
}
  
@-moz-keyframes rotate{
  0%{-moz-transform:rotateZ(0deg);}
  100%{-moz-transform:rotateZ(360deg);}
}
  
@keyframes rotate{
  0%{transform:rotateZ(0deg);}
  100%{transform:rotateZ(360deg);}
}


/* *** Crypto Dash Buttons *** */  

/* Settings Button */
#cryptodash-settings-button {
  top: -2px;
  /*left: calc(50vw - 40px);*/
  left: -2px;
  z-index: 800;
  border-bottom-right-radius: 50%;
  position: fixed;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}

/* Refresh Button */
#cryptodash-refresh-button {
  top: -2px;
  right: -2px;
  z-index: 800;
  border-bottom-left-radius: 50%;
  position: fixed;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}


/* Settings Button */
#cryptodash-clock {
  top: -2px;
  left: calc(50vw - 80px);
  /* left: 5px;*/
  z-index: 800;
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
  position: fixed;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}

#cryptodash-settings-menu{
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}

</style>

</head>

<body>

<!-- Loader when page starts -->
<div id="cryptodash-loader">
    <div class="cryptodash-loader-inner cryptodash-rotate-one"></div>
    <div class="cryptodash-loader-inner cryptodash-rotate-two"></div>
    <div class="cryptodash-loader-inner cryptodash-rotate-three"></div>
</div>

<!-- Crypto Dashboard Main Content -->
<div id="cryptodash-content" style="opacity: 0;">

  <!-- Container grid where trackers are created dynamically-->
  <div class="cryptodash-grid row" id="CryptoDashContentTrackers">

  </div>

  <!-- Settings button -->
  <button id="cryptodash-settings-button" class="btn btn-lg btn-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#cryptodash-settings-menu" aria-controls="cryptodash-settings-menu">
    <i class="fa fa-cog fa-spin"></i>
  </button>

  <!-- Refresh button -->
  <button id="cryptodash-refresh-button" class="btn btn-lg btn-light" type="button" aria-controls="refresh" onclick="manualCryptoDashFetchTrackerData()" hidden>
    <i id ="cryptodash-refresh-icon" class="fa fa-refresh "></i>
  </button>

  <!-- Clock -->
  <button id="cryptodash-clock" class="btn btn-lg btn-light" type="button" aria-controls="cryptodash-clock">
    <i class="fa fa-clock-o"></i> 
  </button>
  
  <!-- Crypto Dash Settings Panel -->
  <div class="offcanvas offcanvas-start bg-light" tabindex="-1" id="cryptodash-settings-menu" aria-labelledby="CryptoDashSettingsMenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="CryptoDashSettingsMenuLabel">Crypto Dashboard</h5>
      <button id="cryptodash-settings-menu-close" type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      

      <!-- Crpyto Dash Settings Panel is split in 2 tabs -->

      <ul class="nav nav-pills nav-justified mb-3" id="cryptodash-settings-tab" role="tablist">
        <!-- Tracker and Data Button-->
        <li class="nav-item" role="presentation">
          <button class="nav-link btn-sm active" id="cryptodash-tracker-tab-button" data-bs-toggle="pill" data-bs-target="#cryptodash-tracker-tab" type="button" role="tab" aria-controls="cryptodash-tracker-tab" aria-selected="true">Trackers</button>
        </li>
        <!-- Customization Button-->
        <li class="nav-item" role="presentation">
          <button class="nav-link btn-sm" id="cryptodash-design-tab-button" data-bs-toggle="pill" data-bs-target="#cryptodash-design-tab" type="button" role="tab" aria-controls="cryptodash-design-tab" aria-selected="false">Design</button>
        </li>
      </ul>

      <hr>

      <div class="tab-content" id="cryptodash-settings-tab-content">
        <!-- Tracker and Data Content-->
        <div class="tab-pane fade show active" id="cryptodash-tracker-tab" role="tabpanel" aria-labelledby="cryptodash-tracker-tab-button">
          
          <!-- Crpyto Dash Tracker -->
          <label for="cryptodash-setup" class="form-label badge bg-secondary">CryptoDash Setup</label>

          <div id="cryptodash-setup" class="d-grid gap-2">
            <div id="cryptodash-setup-buttons" class="btn-group" role="group" aria-label="Trackers and Data Source">

              <button type="button" class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#myapiconnection"> Data Source</button>  
              <button type="button" class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#manageCryptoDashCoinsModal"> Manage Trackers</button>
      
            </div>
          </div>

          <hr>

          <!-- Currency Selector -->
          <label for="cryptodash-currency" class="form-label badge bg-secondary">Currency</label>
          <div id="cryptodash-currency" class="gap-2"> 
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="cryptodash-currency" id="cryptodash-currency-usd" value="USD" checked>
              <label class="form-check-label" for="cryptodash-currency-usd">USD</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="cryptodash-currency" id="cryptodash-currency-eur" value="EUR">
              <label class="form-check-label" for="cryptodash-currency-eur">EUR</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="cryptodash-currency" id="cryptodash-currency-gbp" value="GBP">
              <label class="form-check-label" for="cryptodash-currency-gbp">GBP</label>
            </div>
          </div>

          <hr>

          <!-- Automatic Refresh Switch and Time Poll Interval Slider-->
          <div class="form-check form-switch">
            <label class="form-check-label" for="CryptoDashDataRefreshSwitch"> Data Auto Refresh </label>
            <input class="form-check-input" type="checkbox" id="CryptoDashDataRefreshSwitch"/>
          </div>

          <label for="refreshRanger" class="form-label badge bg-secondary">Refresh rate (minutes): <span id="dataRefreshSpan"></span> </label>
          <input type="range" class="form-range" min="60" max="600" step="60" id="refreshRanger" data-bs-toggle="tooltip" data-bs-placement="top" title="VALUE" disabled>
          


        </div>

        <!-- Customization Content-->
        <div class="tab-pane fade" id="cryptodash-design-tab" role="tabpanel" aria-labelledby="cryptodash-design-tab-button">
          
          <!-- Customization -->

          <!-- Dark/Light Mode -->
          <div class="form-check form-switch">
            <label class="form-check-label" for="CryptoDashLightSwitch"> Dark Mode </label>
            <input class="form-check-input" type="checkbox" id="CryptoDashLightSwitch"/>
          </div>

          <!-- Frosted Settings Menu -->
          <div class="form-check form-switch">
            <label class="form-check-label" for="CryptoDashFrostedDesign"> Frosted Design </label>
            <input class="form-check-input" type="checkbox" id="CryptoDashFrostedDesign"/>
          </div>

          <!-- Show Clock -->
          <div class="form-check form-switch">
            <label class="form-check-label" for="CryptoDashClockToggle"> Clock </label>
            <input class="form-check-input" type="checkbox" id="CryptoDashClockToggle"/>
          </div>

          <!-- Grid Size -->
          <label for="itemSizeRanger" class="form-label badge bg-secondary">Grid Size: <span id="gridsizeSpan"></span> </label>
          <input type="range" class="form-range" min="190" max="570" step="1" id="itemSizeRanger" data-bs-toggle="tooltip" data-bs-placement="top" title="VALUE">

          <hr>
          




          <!-- Background Customization -->
          <label for="cryptodashbackground" class="form-label badge bg-secondary">Background</label>



          <ul id="cryptodash-bg-type-buttons" class="nav nav-pills nav-justified mb-3" role="tablist" aria-label="Background Type">
            
            <li class="nav-item" role="bgselector">
              <button class="btn btn-outline-dark btn-sm active" id="cryptodash-bg-simple-button" data-bs-toggle="pill" data-bs-target="#cryptodash-bg-simple-tab" type="button" role="tab" aria-controls="cryptodash-bg-single-color-tab" aria-selected="true">Simple</button>
            </li>
            <li class="nav-item" role="bgselector">
              <button class="btn btn-outline-dark btn-sm btn-sm" id="cryptodash-bg-gradient-button" data-bs-toggle="pill" data-bs-target="#cryptodash-bg-gradient-tab" type="button" role="tab" aria-controls="cryptodash-bg-gradient-tab" aria-selected="false">Gradient</button>
            </li>
            <li class="nav-item" role="bgselector">
              <button class="btn btn-outline-dark btn-sm btn-sm" id="cryptodash-bg-abstract-button" data-bs-toggle="pill" data-bs-target="#cryptodash-bg-abstract-tab" type="button" role="tab" aria-controls="cryptodash-bg-abstract-tab" aria-selected="false">Abstract</button>
            </li>          
            
          </ul>
      
    
          <div class="tab-content" id="cryptodash-bg-content">
            <!-- Tracker and Data Content-->
            <div class="tab-pane fade show active" id="cryptodash-bg-simple-tab" role="tabpanel" aria-labelledby="cryptodash-bg-simple-button">
              
              <div class="d-grid gap-2"> 

                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-simple-color">Default Colors </button> 
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-custom-color">Random Colors </button>
            
            
        
            
              </div>
              

            </div>

            <div class="tab-pane fade" id="cryptodash-bg-gradient-tab" role="tabpanel" aria-labelledby="cryptodash-bg-gradient-button">
              
              <div class="d-grid gap-2"> 
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-gradient-hd">HD (1920x1080) </button>
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-gradient-4k">4K (3840x2160) </button> <!--(dependent on gradient & abstract only)-->
              </div>

            </div>

            <div class="tab-pane fade" id="cryptodash-bg-abstract-tab" role="tabpanel" aria-labelledby="cryptodash-bg-abstract-button">
              <div class="d-grid gap-2"> 
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-abstract-hd">HD (1920x1080) </button>
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-abstract-4k">4K (3840x2160) </button> <!--(dependent on gradient & abstract only)-->
              </div>
            </div>

          </div>


          <div id="cryptodashbackground" class="d-grid gap-2"> 

                     
            
        
          </div>


        </div>    

      </div>




	  
      
        
      <hr>

      <!-- Configuration Options -->
      <label for="cryptodashConfig" class="form-label badge bg-secondary">Configuration</label>
      <div id="cryptodashsettings" class="d-grid gap-2">
        <div id="cryptodashConfig" class="btn-group" role="group" aria-label="Configuration">
          <button type="button" class="btn btn-outline-dark btn-sm" onclick="saveCryptoDashConfig()"><i class="fa fa-save"></i> Save</button>
          <button type="button" class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#resetCryptoDashConfigModal"><i class="fa fa-recycle"></i> Reset</button>
          <button type="button" class="btn btn-outline-dark btn-sm" onclick="uploadCryptoDashConfig()"><i class="fa fa-upload"></i> Upload</button>
        </div>
      </div>
      
      <hr>
      <div id="cryptodash-about" class="d-grid gap-2">
        <a class="btn btn-outline-dark btn-sm" href="https://github.com/mprajescu/cryptodash"><i class="fa fa-github"></i> CryptoDash <span id="cryptodash-date"></span></a>
      </div>
      

      
    </div>
  </div>


  <!-- Reset Config Modal Modal -->
  <div class="modal fade" id="resetCryptoDashConfigModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="resetCryptoDashConfigModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-light" id="resetCryptoDashConfigModalContent">
        <div class="modal-header">
          <h5 class="modal-title" id="resetCryptoDashConfigModalLabel">Reset Crypto Dashboard Configuration</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="resetCryptoDashConfigModalClose"></button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want reset the configuration?</p>
      
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-dark btn-sm me-auto" onclick="resetCryptoDashConfig()" data-bs-dismiss="modal"><i class="fa fa-recycle"></i> Reset</button>
          <button type="button" class="btn btn-outline-dark btn-sm me-auto" onclick="saveCryptoDashConfig()"><i class="fa fa-save"></i> Save Config File</button>           
          <button type="button" class="btn btn-outline-dark btn-sm" data-bs-dismiss="modal">Cancel</button>
          
           
          
          
          
        </div>
      </div>
    </div>
  </div>

  <!-- Upload Config Modal-->
  <div class="modal fade" id="uploadCryptoDashConfigModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="uploadCryptoDashConfigModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-light" id="uploadCryptoDashConfigModalContent">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadCryptoDashConfigModalLabel">Upload Crypto Dash Config File</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="uploadCryptoDashConfigModalClose"></button>
        </div>

        <form id="uploadCryptoDashConfigForm">

          <div class="modal-body">
            <input class="form-control bg-light" type="file" id="uploadCryptoDashConfigInput" accept=".json" >
          </div>
          <div class="modal-footer">
            
            
            <button type="submit" class="btn btn-outline-dark btn-sm me-auto">Upload</button>
            <button type="button" class="btn btn-outline-dark btn-sm" data-bs-dismiss="modal">Cancel</button>
          </div>

        </form>
        

      </div>
    </div>
  </div>

  
    
  



  <!-- Modal -->
<div class="modal fade" id="manageCryptoDashCoinsModal" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1" aria-labelledby="manageCryptoDashCoinsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-light" id="manageCryptoDashCoinsModalContent">
      <div class="modal-header">
        <h5 class="modal-title" id="manageCryptoDashCoinsModalLabel">Crypto Coins Trackers</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="manageCryptoDashCoinsModalClose"></button>
      </div>
      <div class="modal-body">
        
      <p> Search and add coins to be tracked </p>
      
        <select id="CryptoDashCoinsSelector" multiple placeholder="">
            <!--
            <option value="BTC">Bitcoin</option>
            <option value="ETH">Etherium</option>
            <option value="XRP">Ripple</option>
            <option value="CAKE">PancakeSwap</option>
            <option value="DOGE">Dodgecoin</option>
            <option value="KAT">Kambria</option>
            <option value="SHIB">Shiba Inu</option>
            <option value="XMR">Monero</option>
            -->
          
        </select>
        
		
		
		
      </div>
    
    </div>
  </div>
</div>
  




<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 999">
  <div id="liveToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <i class="fa fa-warning"></i>
      <strong class="me-auto">Browser not supported!</strong>
      
      
    </div>
    <div class="toast-body">
      <p>Your browser doesn't support a stable version of IndexedDB.</p>
      <div class="mt-2 pt-2 border-top">
        <p class="mb-0">You can use one of these browsers: 
          <a class="btn btn-primary" href="https://www.microsoft.com/en-us/edge">Microsoft Edge</a>
          <a class="btn btn-primary" href="https://www.google.com/intl/en_us/chrome/">Google Chrome</a>
          <a class="btn btn-primary" href="https://www.mozilla.org/en-GB/firefox/new/">Mozilla Firefox</a>
        </p>
      </div>
    </div>
  </div>
</div>   



  
    
  

</div>




</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/js/tom-select.complete.min.js"></script>

<script type="text/javascript">

// Declaring variables outside of function 

//CryptoDash Currency

var CryptoDashCurrency = window.localStorage.getItem('CryptoDashCurrency');




// cryptodash-loader
const CryptoDashLoader = document.querySelector('#cryptodash-loader');
const CryptoDashContent = document.getElementById('cryptodash-content');

window.addEventListener('load', (event) => {

  const fadeEffect = setInterval(() => {
    // if we don't set opacity 1 in CSS, then
    // it will be equaled to "" -- that's why
    // we check it, and if so, set opacity to 1
    if (!CryptoDashLoader.style.opacity) {
      CryptoDashLoader.style.opacity = 1;
      CryptoDashContent.style.opacity = 0;
    }

    if (CryptoDashLoader.style.opacity > 0) {
      CryptoDashLoader.style.opacity -= 0.1;
      CryptoDashContent.style.opacity += 1;
            
    } else {
      clearInterval(fadeEffect);
    }

  }, 100);

});


// Date in Crypto Dash menu 
const CryptoDashCurrentDate =  new Date();
CryptoDashCurrentDateYear = CryptoDashCurrentDate.getFullYear();
CryptoDashCurrentDateMonth = CryptoDashCurrentDate.getMonth() + 1;
CryptoDashCurrentDateDay = CryptoDashCurrentDate.getDate();
CryptoDashCurrentDateHour = CryptoDashCurrentDate.getHours();
CryptoDashCurrentDateMinute = CryptoDashCurrentDate.getMinutes();
CryptoDashCurrentDateDaySecond = CryptoDashCurrentDate.getSeconds();

document.getElementById("cryptodash-date").innerHTML = CryptoDashCurrentDateDay + "/" + CryptoDashCurrentDateMonth + "/" + CryptoDashCurrentDateYear;

/* CLOCK */
var CryptoDashClock = setInterval(function() {
  CryptoDashClockTimer();
}, 1000);

function CryptoDashClockTimer() {
  var d = new Date();
  document.getElementById("cryptodash-clock").innerHTML = " <i class=\"fa fa-clock-o\"></i> " + d.toLocaleTimeString();
};


// generate file to be downloaded 
function CryptoDashDownloader(content, fileName, contentType) {
  const a = document.createElement("a");
  const file = new Blob([content], { type: contentType });
  a.href = URL.createObjectURL(file);
  a.download = fileName;
  a.click();
}

// add Crypto Dash configuration Date to Local Storage
function setCryptoDashConfigDate() {
  const CryptoDashConfigDate = CryptoDashCurrentDateDay + "-" + CryptoDashCurrentDateMonth + "-" + CryptoDashCurrentDateYear;
  window.localStorage.setItem('CryptoDashConfigDate', CryptoDashConfigDate);
}





// reset the Crypto Dash configuration and refresh page
function resetCryptoDashConfig() {
  window.localStorage.clear();
  location.reload();
}

// save the Crypto Dash configuration
function saveCryptoDashConfig(){
  const CryptoDashConfig = JSON.stringify(window.localStorage);
  const CryptoDashConfigFileName = "CryptoDashConfig" + "-" + CryptoDashCurrentDateDay + "-" + CryptoDashCurrentDateMonth + "-" + CryptoDashCurrentDateYear +".json";
  CryptoDashDownloader(CryptoDashConfig, CryptoDashConfigFileName, "text/plain");
  
}

//upload config
function uploadCryptoDashConfig(){

  // define modal
  var uploadCryptoDashConfigModal = new bootstrap.Modal(document.getElementById('uploadCryptoDashConfigModal'))

  // show modal
  uploadCryptoDashConfigModal.show(uploadCryptoDashConfigModal);

  let CryptoDashConfigForm = document.querySelector("#uploadCryptoDashConfigForm");
  let CryptoDashConfigFile = document.querySelector("#uploadCryptoDashConfigInput");

  // listen to the submit button to trigger the upload handler
  CryptoDashConfigForm.addEventListener('submit', CryptoDashUploadHandler);

  function CryptoDashConfigProcessor (event) {
    let CryptoDashConfig = JSON.parse(event.target.result);
    
    window.localStorage.clear();
    Object.keys(CryptoDashConfig).forEach(function(value){

      window.localStorage.setItem(value, CryptoDashConfig[value]);

    });
    
    location.reload();

  }
  
  function CryptoDashUploadHandler (event) {

    // Stop the form from reloading the page
    event.preventDefault();

    // If there's no file, do nothing
    if (!CryptoDashConfigFile.value.length) return;

    // Create a new FileReader() object
    let CryptoDashFileReader = new FileReader();

    // Setup the callback event to run when the file is read
    CryptoDashFileReader.onload = CryptoDashConfigProcessor;

    // Read the file
    CryptoDashFileReader.readAsText(CryptoDashConfigFile.files[0]);

  }

}

  

  


// Selecter from the tracker in the settings menu
var CryptoDashCoinsSelector = new TomSelect("#CryptoDashCoinsSelector",{
  plugins: ['remove_button'],
  create: false,
  // Find dynamic list of all coins based on all coin list from data source
  options: [
    { value: "BTC", text: "Bitcoin" },
    { value: "ETH", text: "Etherium" },
    { value: "XRP", text: "Ripple" },
    { value: "CAKE", text: "PancakeSwap" },
    { value: "DOGE", text: "Dodgecoin" },
    { value: "KAT", text: "Kambria" },
    { value: "SHIB", text: "Shiba Inu" },
    { value: "XMR", text: "Monero" },
  ],
  searchField: ['text','value'],
  sortField: {
    field: 'text',
    direction: 'asc'
  },
  onItemAdd:function(value, item){
    this.setTextboxValue('');
    this.refreshOptions();
    createCryptoDashTracker(value);
    // console.log("changed Crypto Dash coin selection and added the " + value + " Tracker");  
  },
  onItemRemove:function(value){
    this.refreshOptions();
    removeCryptoDashTracker(value);
    //console.log("changed Crypto Dash coin selection and removed the " + value + " Tracker");
  },
  render:{
    option:function(data,escape){
    //console.log(data);
      return '<div class="d-flex"><span>' + escape(data.text) + ' (' + escape(data.value) + ')</span> </div>';
    },
    item:function(data,escape){
      return '<div>' + escape(data.text) + ' (' + escape(data.value) + ') </div>';
    }
  }
});



// GRID

var CryptoDashGrid = new Muuri('.cryptodash-grid', {
  
  dragEnabled: true,
  layoutOnInit: false

}).on('move', function () {
  saveCryptoDashLayout(CryptoDashGrid);
});

var CryptoDashLayout = window.localStorage.getItem('CryptoDashLayout');
var CryptoDashTrackerWidth = window.localStorage.getItem('CryptoDashTrackerWidth');
var CryptoDashTrackerHeight = window.localStorage.getItem('CryptoDashTrackerHeight');

if (CryptoDashLayout) {
  loadCryptoDashLayout(CryptoDashGrid, CryptoDashLayout);

  if(CryptoDashLayout === "[]") {
    var CryptoDashRefreshButton = document.getElementById("cryptodash-refresh-button");
    var HideCryptoDashRefreshButton = document.createAttribute("hidden");
    
    CryptoDashRefreshButton.setAttributeNode(HideCryptoDashRefreshButton);

  } else {
    document.getElementById("cryptodash-refresh-button").removeAttribute("hidden");
  }

} else {
  CryptoDashGrid.layout(true);
}

if (CryptoDashTrackerWidth && CryptoDashTrackerHeight) {
  document.querySelectorAll(".cryptodash-tracker").forEach((element) => {
    element.style.width = CryptoDashTrackerWidth;
    element.style.height = CryptoDashTrackerHeight;
  });

  var itemSizeRanger = document.getElementById("itemSizeRanger");

  itemSizeRanger.value = CryptoDashTrackerWidth.substring(0, CryptoDashTrackerWidth.length - 2);
  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title; 
  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout(true);

} else {

  var itemSizeRanger = document.getElementById("itemSizeRanger");
  itemSizeRanger.value = 420;
  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title;

}


function serializeCryptoDashLayout(CryptoDashGrid) {
  var itemIds = CryptoDashGrid.getItems().map(function (item) {
    return item.getElement().getAttribute('crypto-dash-id');
  });
  return JSON.stringify(itemIds);
}

function saveCryptoDashLayout(CryptoDashGrid) {
  var CryptoDashLayout = serializeCryptoDashLayout(CryptoDashGrid);
  window.localStorage.setItem('CryptoDashLayout', CryptoDashLayout);
  setCryptoDashConfigDate();
}


function loadCryptoDashLayout(CryptoDashGrid, serializedCryptoDashLayout){

  var CryptoDashLayout = JSON.parse(serializedCryptoDashLayout);

  for (var i = 0; i < CryptoDashLayout.length; i++) {
    itemId = CryptoDashLayout[i];
       
    //console.log("loaded layout of " + itemId + " Tracker");

    CryptoDashCoinsSelector.addItem(itemId);
    
  }
  
  
}






(function () {
  let CryptoDashLightSwitch = document.getElementById("CryptoDashLightSwitch");
  if (!CryptoDashLightSwitch) {
    return;
  }
  
  /**
   * @function darkmode
   * @summary: changes the theme to 'dark mode' and save settings to local stroage.
   * Basically, replaces/toggles every CSS class that has '-light' class with '-dark'
   */
  function darkMode() {
    document.querySelectorAll(".bg-light").forEach((element) => {
      element.className = element.className.replace(/-light/g, "-dark");
    });

    //document.body.classList.add("bg-dark");
    document.getElementById("cryptodash-settings-menu-close").classList.add("bg-light");
    document.getElementById("cryptodash-settings-menu-close").classList.remove("bg-dark");
    document.getElementById("cryptodash-settings-button").classList.add("btn-dark");
    document.getElementById("cryptodash-settings-button").classList.remove("btn-light");
    document.getElementById("cryptodash-refresh-button").classList.add("btn-dark");
    document.getElementById("cryptodash-refresh-button").classList.remove("btn-light");
    document.getElementById("cryptodash-clock").classList.add("btn-dark");
    document.getElementById("cryptodash-clock").classList.remove("btn-light");

    //reset config modal close button & modal
    document.getElementById("resetCryptoDashConfigModalClose").classList.add("bg-light");
    document.getElementById("resetCryptoDashConfigModalClose").classList.remove("bg-dark");
    document.getElementById("resetCryptoDashConfigModalContent").classList.add("bg-dark");
    document.getElementById("resetCryptoDashConfigModalContent").classList.remove("bg-light");
	  document.getElementById("manageCryptoDashCoinsModalContent").classList.add("bg-dark");
    document.getElementById("manageCryptoDashCoinsModalContent").classList.remove("bg-light");
	  document.getElementById("manageCryptoDashCoinsModalClose").classList.add("bg-light");
    document.getElementById("manageCryptoDashCoinsModalClose").classList.remove("bg-dark");
    document.getElementById("uploadCryptoDashConfigModalContent").classList.add("bg-dark");
    document.getElementById("uploadCryptoDashConfigModalContent").classList.remove("bg-light");
	  document.getElementById("uploadCryptoDashConfigModalClose").classList.add("bg-light");
    document.getElementById("uploadCryptoDashConfigModalClose").classList.remove("bg-dark");
    document.getElementById("uploadCryptoDashConfigInput").classList.add("text-light");
    document.getElementById("uploadCryptoDashConfigInput").classList.remove("text-dark");
    
    // update the select drop down
    document.querySelector('.ts-control').classList.add("bg-dark");
    //document.querySelector('.ts-dropdown').classList.add("bg-dark");
    document.getElementById("CryptoDashCoinsSelector-ts-control").classList.add("text-white");
    //document.querySelectorAll(".option:not(.active)").forEach((element) => {
    //  element.classList.add("text-black-50");
    //});



    document.querySelectorAll(".btn-outline-dark").forEach((element) => {
      element.className = element.className.replace(/-dark/g, "-light");
    });

    document.querySelectorAll(".box-close-item").forEach((element) => {
      element.classList.add("btn-light");
      element.classList.remove("btn-dark");
    });

    if (document.body.classList.contains("text-dark")) {
      document.body.classList.replace("text-dark", "text-light");
    } else {
      document.body.classList.add("text-light");
    }
    
    

    // set light switch input to true
    if (! CryptoDashLightSwitch.checked) {
      CryptoDashLightSwitch.checked = true;
    }
    localStorage.setItem("CryptoDashLightSwitch", "dark");
    setCryptoDashConfigDate();
  }

  /**
   * @function lightmode
   * @summary: changes the theme to 'light mode' and save settings to local stroage.
   */
  function lightMode() {
    document.querySelectorAll(".bg-dark").forEach((element) => {
      element.className = element.className.replace(/-dark/g, "-light");
    });

    //document.body.classList.add("bg-light");
    document.getElementById("cryptodash-settings-button").classList.add("btn-light");
    document.getElementById("cryptodash-settings-button").classList.remove("btn-dark");
    document.getElementById("cryptodash-refresh-button").classList.add("btn-light");
    document.getElementById("cryptodash-refresh-button").classList.remove("btn-dark");
    document.getElementById("cryptodash-clock").classList.add("btn-light");
    document.getElementById("cryptodash-clock").classList.remove("btn-dark");
    document.getElementById("uploadCryptoDashConfigInput").classList.add("text-dark");
    document.getElementById("uploadCryptoDashConfigInput").classList.remove("text-light");

    // update the select drop down
    document.querySelector('.ts-control').classList.add("bg-light");
    //document.querySelector('.ts-dropdown').classList.add("bg-light");
    document.getElementById("CryptoDashCoinsSelector-ts-control").classList.add("text-dark");
    //document.querySelectorAll(".option:not(.active)").forEach((element) => {
    //  element.classList.add("text-dark");
    //});


    document.querySelectorAll(".box-close-item").forEach((element) => {
      element.classList.add("btn-dark");
      element.classList.remove("btn-light");
    });

    document.querySelectorAll(".btn-outline-light").forEach((element) => {
      element.className = element.className.replace(/-light/g, "-dark");
    });
    

    if (document.body.classList.contains("text-light")) {
      document.body.classList.replace("text-light", "text-dark");
    } else {
      document.body.classList.add("text-dark");
    }
    
    

    if (CryptoDashLightSwitch.checked) {
      CryptoDashLightSwitch.checked = false;
    }
    window.localStorage.setItem("CryptoDashLightSwitch", "light");
    setCryptoDashConfigDate();
  }
  
  /**
   * @function onToggleMode
   * @summary: the event handler attached to the switch. calling @darkMode or @lightMode depending on the checked state.
   */
  function onToggleMode() {
    if (CryptoDashLightSwitch.checked) {
      darkMode();

    } else {
      lightMode();
    }
  }
  
  /**
   * @function getSystemDefaultTheme
   * @summary: get system default theme by media query
   */
  function getSystemDefaultTheme() {
    const darkThemeMq = window.matchMedia("(prefers-color-scheme: dark)");
    if (darkThemeMq.matches) {
      return "dark";
    }
    return "light";
  }

  function setup() {
    var settings = localStorage.getItem("CryptoDashLightSwitch");
    if (settings == null) {
      settings = getSystemDefaultTheme();
    }
    
    if (settings == "dark") {
      document.getElementById("cryptodash-settings-menu-close").classList.add("bg-light");
      CryptoDashLightSwitch.checked = true;
      

    }
    
    CryptoDashLightSwitch.addEventListener("change", onToggleMode);
    onToggleMode();
  }
  
  setup();
  
})();


// slider to change Auto Refresh
var autoRefreshRanger = document.getElementById("refreshRanger");

autoRefreshRanger.onchange = function() {
  autoRefreshRanger.title = autoRefreshRanger.value;
  window.localStorage.setItem('CryptoDashAutoRefresh', autoRefreshRanger.value );
  document.getElementById("dataRefreshSpan").innerHTML = autoRefreshRanger.value / 60;
}

autoRefreshRanger.oninput = function() {
  
  // trigger the auto refresh function

  stopAutoCryptoDashFetchTrackerData();
  autoCryptoDashFetchTrackerData();
  autoRefreshRanger.title = autoRefreshRanger.value;
  document.getElementById("dataRefreshSpan").innerHTML = autoRefreshRanger.value / 60;

  
}


// Sldier to change width

var itemSizeRanger = document.getElementById("itemSizeRanger");



itemSizeRanger.onchange = function() {
  // update all trackers in dom with the updated size
  
  
  // update grid size info
  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title;

  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();

  window.localStorage.setItem('CryptoDashTrackerWidth', itemSizeRanger.value + "px");
  window.localStorage.setItem('CryptoDashTrackerHeight', itemSizeRanger.value + "px");
  setCryptoDashConfigDate();
  
}

itemSizeRanger.oninput = function() {
  
  document.querySelectorAll(".cryptodash-tracker").forEach((element) => {
    element.style.width = itemSizeRanger.value + "px";
    element.style.height = itemSizeRanger.value + "px";
  });

  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title;

  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();
}


function createCryptoDashTracker(coinAbr) {

  var CryptoDashContentTrackers = document.getElementById("CryptoDashContentTrackers");
  var CryptoDashLightSwitch = window.localStorage.getItem("CryptoDashLightSwitch");
  var Tracker = document.createElement("div");
  var TrackerItemContent = document.createElement("div");
  var TrackerItemContentTitle = document.createElement("H1");
  var TrackerAttribute = document.createAttribute("crypto-dash-id");
  var TrackerIDAttribute = document.createAttribute("id");

  var TrackerPrice = document.createElement("H1");
  var TrackerPriceIDAttribute = document.createAttribute("id");

  var TrackerHighestValue24 = document.createElement("p");
  var TrackerLowestValue24 = document.createElement("p");
  var TrackerHighestValue24IDAttribute = document.createAttribute("id");
  var TrackerLowestValue24IDAttribute = document.createAttribute("id");

  var TrackerHighestValueHour = document.createElement("p");
  var TrackerLowestValueHour = document.createElement("p");
  var TrackerHighestValueHourIDAttribute = document.createAttribute("id");
  var TrackerLowestValueHourIDAttribute = document.createAttribute("id");

  var TrackerChangeValue24 = document.createElement("p");
  var TrackerChangePCTValue24 = document.createElement("p");
  var TrackerChangeValue24IDAttribute = document.createAttribute("id");
  var TrackerChangePCTValue24IDAttribute = document.createAttribute("id");

  var TrackerChangeValueHour = document.createElement("p");
  var TrackerChangePCTValueHour = document.createElement("p");
  var TrackerChangeValueHourIDAttribute = document.createAttribute("id");
  var TrackerChangePCTValueHourIDAttribute = document.createAttribute("id");

  var TrackerImg = document.createElement("img");
  var TrackerImgIDAttribute = document.createAttribute("id");
  var TrackerImgSRCAttribute = document.createAttribute("src");

  var TrackerUpdateTime = document.createElement("p");
  var TrackerUpdateTimeIDAttribute = document.createAttribute("id");


  Tracker.classList.add("cryptodash-tracker");
  if(CryptoDashLightSwitch && CryptoDashLightSwitch === "dark") {
    Tracker.classList.add("bg-dark");
  } else {
    Tracker.classList.add("bg-light");
  }

  Tracker.classList.add("col");
  TrackerItemContent.classList.add("cryptodash-tracker-content");

  TrackerAttribute.value = coinAbr;
  TrackerIDAttribute.value = coinAbr;
  TrackerPriceIDAttribute.value = coinAbr + "-price";
  
  TrackerHighestValue24IDAttribute.value = coinAbr + "-high24";
  TrackerLowestValue24IDAttribute.value = coinAbr + "-low24";

  TrackerHighestValueHourIDAttribute.value = coinAbr + "-highhour";
  TrackerLowestValueHourIDAttribute.value = coinAbr + "-lowhour";

  TrackerChangeValue24IDAttribute.value = coinAbr + "-change24";
  TrackerChangePCTValue24IDAttribute.value = coinAbr + "-changepct24";

  TrackerChangeValueHourIDAttribute.value = coinAbr + "-changehour";
  TrackerChangePCTValueHourIDAttribute.value = coinAbr + "-changepcthour";

  TrackerImgIDAttribute.value = coinAbr + "-img";
  TrackerImgSRCAttribute.value = "";
  
  TrackerUpdateTimeIDAttribute.value = coinAbr + "-updatetime";

  Tracker.setAttributeNode(TrackerAttribute);
  Tracker.setAttributeNode(TrackerIDAttribute);

  TrackerPrice.setAttributeNode(TrackerPriceIDAttribute);

  TrackerHighestValue24.setAttributeNode(TrackerHighestValue24IDAttribute);
  TrackerLowestValue24.setAttributeNode(TrackerLowestValue24IDAttribute);

  TrackerHighestValueHour.setAttributeNode(TrackerHighestValueHourIDAttribute);
  TrackerLowestValueHour.setAttributeNode(TrackerLowestValueHourIDAttribute);

  TrackerChangeValue24.setAttributeNode(TrackerChangeValue24IDAttribute);
  TrackerChangePCTValue24.setAttributeNode(TrackerChangePCTValue24IDAttribute);

  TrackerChangeValueHour.setAttributeNode(TrackerChangeValueHourIDAttribute);
  TrackerChangePCTValueHour.setAttributeNode(TrackerChangePCTValueHourIDAttribute);

  TrackerImg.setAttributeNode(TrackerImgIDAttribute);
  TrackerImg.setAttributeNode(TrackerImgSRCAttribute);

  TrackerUpdateTime.setAttributeNode(TrackerUpdateTimeIDAttribute);

  TrackerItemContentTitle.innerText = coinAbr;
  
  TrackerItemContent.appendChild(TrackerItemContentTitle);
  TrackerItemContent.appendChild(TrackerPrice);
  TrackerItemContent.appendChild(TrackerHighestValue24);
  TrackerItemContent.appendChild(TrackerLowestValue24);
  TrackerItemContent.appendChild(TrackerHighestValueHour);
  TrackerItemContent.appendChild(TrackerLowestValueHour);
  TrackerItemContent.appendChild(TrackerChangeValue24);
  TrackerItemContent.appendChild(TrackerChangePCTValue24);
  TrackerItemContent.appendChild(TrackerChangeValueHour);
  TrackerItemContent.appendChild(TrackerChangePCTValueHour);
  TrackerItemContent.appendChild(TrackerImg);
  TrackerItemContent.appendChild(TrackerUpdateTime);

  Tracker.appendChild(TrackerItemContent);


  // add the Tracker to the screen 
  CryptoDashContentTrackers.appendChild(Tracker);
  CryptoDashGrid.add(Tracker);

  // get current Tracker size
  var CurrentCryptoDashTrackerWidth = window.localStorage.getItem('CryptoDashTrackerWidth');
  var CurrentCryptoDashTrackerHeight = window.localStorage.getItem('CryptoDashTrackerHeight');


  Tracker.style.width = CurrentCryptoDashTrackerWidth;
  Tracker.style.height = CurrentCryptoDashTrackerHeight;

  // reszie the Trackers to be the same size
  /*
  if (CurrentCryptoDashTrackerWidth && CurrentCryptoDashTrackerHeight) {
    document.querySelectorAll(".cryptodash-Tracker").forEach((element) => {
      element.style.width = CurrentCryptoDashTrackerWidth;
      element.style.height = CurrentCryptoDashTrackerHeight;
    });
  };
*/
  
  
  CryptoDashGrid.synchronize();
  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();
  saveCryptoDashLayout(CryptoDashGrid);
  
  // show refresh button
  document.getElementById("cryptodash-refresh-button").removeAttribute("hidden");

}

function removeCryptoDashTracker(coinAbr) {

  // get current layout and position of element
  var CurrentCryptoDashLayout = JSON.parse(window.localStorage.getItem('CryptoDashLayout'));
  var itemIndex = CurrentCryptoDashLayout.indexOf(coinAbr);

  // remove element from layout
  CurrentCryptoDashLayout.splice(itemIndex, 1);

  // save the updated layout
  var UpdatedCryptoDashLayout = JSON.stringify(CurrentCryptoDashLayout);
  window.localStorage.setItem('CryptoDashLayout', UpdatedCryptoDashLayout);

  // get the current Tracker
  var Tracker = document.getElementById(coinAbr);

  // remove Tracker from grid and dom
  CryptoDashGrid.remove(Tracker);
  Tracker.remove();
  
  // sync grid

  CryptoDashGrid.synchronize();
  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();
  

  

}

// Get Data

//get interval
var refreshCryptoDashDataInterval = window.localStorage.getItem("CryptoDashAutoRefresh");

// if interval not available set 60 
if(!refreshCryptoDashDataInterval){
  window.localStorage.setItem('CryptoDashAutoRefresh', '60' );
}

var autoDataPull = null;

function autoCryptoDashFetchTrackerData(){

  var refreshCryptoDashDataInterval = autoRefreshRanger.value;
  autoDataPull = setInterval(manualCryptoDashFetchTrackerData, refreshCryptoDashDataInterval * 100);
} 


async function manualCryptoDashFetchTrackerData() {

  var CryptoDashRefreshButton = document.getElementById('cryptodash-refresh-button');
  document.getElementById('cryptodash-refresh-icon').classList.add("fa-spin");
  
  var CryptoDashtrackerInfo = JSON.parse(window.localStorage.getItem('CryptoDashLayout'));

  // get the API key from local storage 
  // api key stored when interracting with data source
  var apiKey="123";

  console.log("this is the apikey: " + apiKey);

  if(!CryptoDashtrackerInfo) {
    console.log("Nothing is tracked");
  } else if(CryptoDashtrackerInfo === "[]") {
    console.log("Nothing is tracked");
  } else {


    

    // mapping the array with the tracker info
  
    var preparedCryptoDashtrackerInfo = CryptoDashtrackerInfo.map(function(value) {
      return value;
    }).join(',');
    
  
    // to define 
    var priceCurrency = "USD,EUR,GBP";
    
    
    try {
     
      const response = await fetch('https://min-api.cryptocompare.com/data/pricemultifull?fsyms=' + preparedCryptoDashtrackerInfo + '&tsyms=' + priceCurrency)
      //https://min-api.cryptocompare.com/data/price?fsym=BTC&tsyms=USD
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();

      var CryptoDashData = JSON.stringify(data);

      window.localStorage.removeItem('CryptoDashData');

      window.localStorage.setItem('CryptoDashData', CryptoDashData );
      /*
      var mycoin =  "BTC";
      var mycurrency = "EUR";
      var mycoinquery = "data.DISPLAY." + mycoin + "." + mycurrency + ".PRICE"; // nu returneaza
      */
      
      
      //console.log(mycoins);
      
      //console.log(data[DISPLAY]);
      //console.log(data.DISPLAY.BTC.EUR.PRICE); // returneaza

      // imi trebuie sa iau moneda si currency dinamic, in functie de ce am eu de afisat
      
      //console.log(JSON.parse(CryptoDashData));

      document.querySelectorAll(".cryptodash-tracker").forEach((element) => {

        //let mycoin = "BTC";
        //var mycurrency = "GBP";
        //const mycoins = data['DISPLAY'][mycoin][mycurrency]['PRICE'];


        var cryptoDashTrackerID = element.getAttribute('crypto-dash-id');
        //var CurrentTracker = document.getElementById(cryptoDashTrackerID);

        var CryptoDashCurrency = window.localStorage.getItem('CryptoDashCurrency');
        
        document.getElementById(cryptoDashTrackerID + "-price").innerHTML = data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['PRICE'];
        //TrackerPrice.innerText = data['DISPLAY'][cryptoDashTrackerID][mycurrency]['PRICE'];
        //CurrentTracker.firstChild.appendChild(TrackerPrice);
        
        document.getElementById(cryptoDashTrackerID + "-high24").innerHTML = "24 Hour High: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['HIGH24HOUR'];
        document.getElementById(cryptoDashTrackerID + "-low24").innerHTML = "24 Hour Low: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['LOW24HOUR'];
        document.getElementById(cryptoDashTrackerID + "-highhour").innerHTML = "Last Hour High: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['HIGHHOUR'];
        document.getElementById(cryptoDashTrackerID + "-lowhour").innerHTML = "Last Hour Low: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['LOWHOUR'];
        
        document.getElementById(cryptoDashTrackerID + "-change24").innerHTML = "Change in last 24 Hours: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGE24HOUR'];
        document.getElementById(cryptoDashTrackerID + "-changepct24").innerHTML = "Change in last 24 Hours (PCT): " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEPCT24HOUR'];
        document.getElementById(cryptoDashTrackerID + "-changehour").innerHTML = "Change in last Hour: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEHOUR'];
        document.getElementById(cryptoDashTrackerID + "-changepcthour").innerHTML = "Change in last Hour (PCT): " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEPCTHOUR'];


        var CryptoDashDataSourceURL = "https://www.cryptocompare.com" + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['IMAGEURL'];



        var CryptoDashTrackerImg = document.getElementById(cryptoDashTrackerID + "-img");
        CryptoDashTrackerImg.src = CryptoDashDataSourceURL;
        
       

        var unixTimestamp = data['RAW'][cryptoDashTrackerID][CryptoDashCurrency]['LASTUPDATE'];
        var lastupdate = new Date(unixTimestamp*1000);
        var showlastupdate = lastupdate.getDate() + "-" +(lastupdate.getMonth()+1)+ "-" +lastupdate.getFullYear()+ " "+lastupdate.getHours()+ ":" +lastupdate.getMinutes()+ ":" +lastupdate.getSeconds();
        

        document.getElementById(cryptoDashTrackerID + "-updatetime").innerHTML = showlastupdate;
        
      
      });


    } catch(e) {
      console.log(e);
    }

    //return data;

  };

  document.getElementById('cryptodash-refresh-icon').classList.remove("fa-spin");
  
}


function stopAutoCryptoDashFetchTrackerData() {
  clearInterval(autoDataPull);
}

// Data auto refresh switch
(function () {
  let CryptoDashDataRefreshSwitch = document.getElementById("CryptoDashDataRefreshSwitch");
  if (!CryptoDashDataRefreshSwitch) {
    return;
  }

  function autoRefresh() {
    document.getElementById("refreshRanger").removeAttribute("disabled");
    if (CryptoDashDataRefreshSwitch.checked) {
      CryptoDashDataRefreshSwitch.checked = true;
    }
    window.localStorage.setItem("CryptoDashDataRefreshSwitch", "Auto");

    
    var autoRefreshRanger = document.getElementById("refreshRanger");
    document.getElementById("dataRefreshSpan").innerHTML = autoRefreshRanger.value / 60;

    var CryptoDashAutoRefresh = window.localStorage.getItem('CryptoDashAutoRefresh');

    if (CryptoDashAutoRefresh) {
      
      autoRefreshRanger.value = CryptoDashAutoRefresh;
      // trigger the data pull with auto refresh
      autoCryptoDashFetchTrackerData();

      document.getElementById("dataRefreshSpan").innerHTML = CryptoDashAutoRefresh / 60;

    } else {
      autoRefreshRanger.value = 0;
      autoRefreshRanger.title = autoRefreshRanger.value;
      document.getElementById("dataRefreshSpan").innerHTML = "N/A";
    }
    
  }

  function manualRefresh() {

    document.getElementById("refreshRanger").disabled = true;

    if (CryptoDashDataRefreshSwitch.checked) {
      CryptoDashDataRefreshSwitch.checked = false;
    }
    localStorage.setItem("CryptoDashDataRefreshSwitch", "Manual");
    document.getElementById("dataRefreshSpan").innerHTML = "N/A"; 
    stopAutoCryptoDashFetchTrackerData();
  }

  function onToggleMode() {
    if (CryptoDashDataRefreshSwitch.checked) {
      autoRefresh();
    } else {
      manualRefresh();
    }
  }

  function setup() {
    var settings = window.localStorage.getItem("CryptoDashDataRefreshSwitch");
    if (settings == null) {
      window.localStorage.setItem("CryptoDashDataRefreshSwitch", "Manual");
    }
    
    if (settings == "Auto") {
      CryptoDashDataRefreshSwitch.checked = true;
    }
    
    CryptoDashDataRefreshSwitch.addEventListener("change", onToggleMode);
    onToggleMode();
  }
  
  setup();

})();


// CryptoDash Currency selector
(function () {

  var CryptoDashCurrencyUSD = document.getElementById("cryptodash-currency-usd");
  var CryptoDashCurrencyEUR = document.getElementById("cryptodash-currency-eur");
  var CryptoDashCurrencyGBP = document.getElementById("cryptodash-currency-gbp");

  if (!CryptoDashCurrencyUSD || !CryptoDashCurrencyEUR || !CryptoDashCurrencyGBP) {
    return;
  }

  function USDToggle() {
    if (CryptoDashCurrencyUSD.checked) {
      window.localStorage.setItem("CryptoDashCurrency", "USD");
      CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");
      manualCryptoDashFetchTrackerData();
    }
  }

  function EURToggle() {
    if (CryptoDashCurrencyEUR.checked) {
      window.localStorage.setItem("CryptoDashCurrency", "EUR");
      CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");
      manualCryptoDashFetchTrackerData();
    }
  }

  function GBPToggle() {
    if (CryptoDashCurrencyGBP.checked) {
      window.localStorage.setItem("CryptoDashCurrency", "GBP");
      CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");
      manualCryptoDashFetchTrackerData();
    }
  }


  function setup() {
    var CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");

    if (CryptoDashCurrency == null) {
      window.localStorage.setItem("CryptoDashCurrency", "USD");
    }
    
    if (CryptoDashCurrency == "USD") {
      CryptoDashCurrencyUSD.checked = true;
    }

    if (CryptoDashCurrency == "EUR") {
      CryptoDashCurrencyEUR.checked = true;
    }

    if (CryptoDashCurrency == "GBP") {
      CryptoDashCurrencyGBP.checked = true;
    }
    
    CryptoDashCurrencyUSD.addEventListener("change", USDToggle);
    CryptoDashCurrencyEUR.addEventListener("change", EURToggle);
    CryptoDashCurrencyGBP.addEventListener("change", GBPToggle);

    USDToggle();
  }
  
  setup();


})();


// CryptoDash Background Selector

(function () {


  function GradientHD() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "GradientHD");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-image-gradient-hd");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';

  }

  function Gradient4K() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "Gradient4K");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-image-gradient-4k");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }

  function AbstractHD() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "AbstractHD");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-image-abstract-hd");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.add("active");
    
    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }

  function Abstract4K() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "Abstract4K");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd");
    document.querySelector("body").classList.add("cryptodash-bg-image-abstract-4k");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.add("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';    
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
  }


  function SimpleColor() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "Simple");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-simple");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.add("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = '<i class="fa fa-check"></i> Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';    
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }

  function CustomColor() {

    const hexColorCode = [ 0,	1, 2,	3,	4,	5,	6,	7,	8,	9, "a", "b", "c", "d", "e", "f"];

    const getRandomArray = () => {
      return Math.floor(Math.random() * hexColorCode.length);
    };

    let hexColorName = "#";

    for (let i = 0; i < 6; i++) {
      hexColorName += hexColorCode[getRandomArray()];
    }

    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", hexColorName);

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-custom");

    document.documentElement.style.setProperty('--cryptodash-main-bg-color', hexColorName);

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.add("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = '<i class="fa fa-check"></i> Random Colors (' + hexColorName + ')';    
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }



  function setup() {
    var CryptoDashBackground = window.localStorage.getItem("CryptoDashBackground");
    var CryptoDashBGGradientHD = document.getElementById("cryptodash-bg-gradient-hd");
    var CryptoDashBGGradient4K = document.getElementById("cryptodash-bg-gradient-4k");
    var CryptoDashBGAbstractHD = document.getElementById("cryptodash-bg-abstract-hd");
    var CryptoDashBGAbstract4K = document.getElementById("cryptodash-bg-abstract-4k");
    var CryptoDashBGCustomColor = document.getElementById("cryptodash-bg-custom-color");
    var CryptoDashBGSimpleColor = document.getElementById("cryptodash-bg-simple-color");
    
    var checkhex = /^#([0-9a-f]{3}){1,2}$/i;

    if (CryptoDashBackground == null) {
      window.localStorage.setItem("CryptoDashBackground", "Gradient4K");
    }

    
    
    if (CryptoDashBackground == "GradientHD") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-gradient-hd");
      document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

      document.getElementById("cryptodash-bg-gradient-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    }

    if (CryptoDashBackground == "Gradient4K") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-gradient-4k");
      document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

      document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
    }

    if (CryptoDashBackground == "AbstractHD") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-abstract-hd");
      document.getElementById("cryptodash-bg-abstract-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");
      
      document.getElementById("cryptodash-bg-abstract-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    }

    if (CryptoDashBackground == "Abstract4K") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-abstract-4k");
      document.getElementById("cryptodash-bg-abstract-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");

      document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
    }

    if (CryptoDashBackground == "Simple") {
      // Change body class with selected background 
      document.querySelector("body").classList.add("cryptodash-bg-simple");
      document.getElementById("cryptodash-bg-simple-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-simple-color").innerHTML = '<i class="fa fa-check"></i> Default Colors';

    } 
    
    if (checkhex.test(CryptoDashBackground)) {
      // Change body class with selected background 
      document.querySelector("body").classList.add("cryptodash-bg-custom");

      /*
      CryptoDashBackground

      --cryptodash-main-bg-color: #282537;
      --cryptodash-gradient-bg-color-1: #3c3b52;
      --cryptodash-gradient-bg-color-2: #252233;
      */

      document.documentElement.style.setProperty('--cryptodash-main-bg-color', CryptoDashBackground);

      document.getElementById("cryptodash-bg-simple-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

      document.getElementById("cryptodash-bg-custom-color").innerHTML = '<i class="fa fa-check"></i> Random Color (' + CryptoDashBackground + ')';    

    }


    CryptoDashBGCustomColor.addEventListener("click", CustomColor);
    CryptoDashBGSimpleColor.addEventListener("click", SimpleColor);

    CryptoDashBGGradientHD.addEventListener("click", GradientHD);
    CryptoDashBGGradient4K.addEventListener("click", Gradient4K);
    CryptoDashBGAbstractHD.addEventListener("click", AbstractHD);
    CryptoDashBGAbstract4K.addEventListener("click", Abstract4K);
    

    //Gradient4K();

  }
  setup();

})();


</script>

</html>
