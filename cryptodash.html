<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8">
<meta name="description" content="Crypto Currency Tracker Dashboard">
<meta name="keywords" content="HTML, CSS, JavaScript">
<meta name="author" content="Mihail-Vlad Prajescu">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">


<title> Crypto Dash </title>



<style>

* {
    box-sizing: border-box;
}

body {
  /*
    margin-left: 40px;
    margin-right: 40px;
    margin-top: 0px !important;
    */
    margin: 40px;
	font-family: sans-serif;
    background-position: center center;
    background-attachment: fixed;
	background-image: url(https://source.unsplash.com/3840x2160/?abstract);
	background-repeat: no-repeat;
	background-size: 110%;
	background-color: #000;
	/*
	https://source.unsplash.com/3840x2160/?gradient
	https://source.unsplash.com/3840x2160/?abstract
	https://source.unsplash.com/1920x1080/?gradient
	https://source.unsplash.com/1920x1080/?abstract
	
	*/
}



.grid {
    position: relative;
    
}
.item {
    display: block;
    position: absolute;
    width: 420px;
    height: 420px;
    margin: 20px;
    padding: 10px;
    z-index: 1;
    background: #fff;
    
    border-radius: 20px;
    box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;

}

.item.muuri-item-dragging {
    z-index: 3;
}
.item.muuri-item-releasing {
    z-index: 2;
}
.item.muuri-item-hidden {
    z-index: 0;
}
.item-content {
    position: relative;
    width: 100%;
    height: 100%;
}




/* CSS Loader */


#loader{
    width:100px;
    height:80px;
    position:fixed;
    top:50%;
    left:50%;
    margin-top:-40px;
    margin-left:-50px;
  }
  
  .inner{
    -webkit-animation:rotate 0.8s linear infinite;
    -moz-animation:rotate 0.8s linear infinite;
    animation:rotate 0.8s linear infinite;
    margin-top:20px;
    border-radius:50%;
    width:50px;
    height:50px;
    position:absolute;
  }
  
  .rotate-one{
    left:50%;
    margin-left:-25px;
    border-top:2px solid #1f6d8f;
  }
  
  .rotate-two{
    top:-10px;
    left:30px;
    border-left:2px solid #1f6d8f;
  }
  
  .rotate-three{
    top:-10px;
    right:30px;
    border-right:2px solid #1f6d8f;
  }
  
  @-webkit-keyframes rotate{
    0%{-webkit-transform:rotateZ(0deg);}
    100%{-webkit-transform:rotateZ(360deg);}
  }
  
  @-moz-keyframes rotate{
    0%{-moz-transform:rotateZ(0deg);}
    100%{-moz-transform:rotateZ(360deg);}
  }
  
  @keyframes rotate{
    0%{transform:rotateZ(0deg);}
    100%{transform:rotateZ(360deg);}
  }


  /* Custom Bootstrap 

  .offcanvas {
    background-color: rgba(0, 0, 0, .50);
	backdrop-filter: blur(10px);
  
  }*/

  #settingsbutton {
    top: -2px;
    left: calc(50vw - 40px);
    z-index: 800;
    position: fixed;
  }






</style>
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
<script src="https://cdn.jsdelivr.net/npm/muuri@0.9.5/dist/muuri.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web-animations-js@2.3.2/web-animations.min.js"></script>



</head>

<body>


<div id="loader">
    <div class="inner rotate-one"></div>
    <div class="inner rotate-two"></div>
    <div class="inner rotate-three"></div>
</div>

<div id="cryptodashcontent" style="opacity: 0;">


  <div class="grid row">
    <div class="item bg-light col" crypto-dash-id="BTC">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        <button type="button" class="btn box-close-item" aria-label="Close"> <i class="fa fa-close"></i></button>
        Bitcoin 
        <!-- Safe zone ends -->
      </div>
    </div>
  
    <div class="item bg-light col" crypto-dash-id="ETH">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        <div class="my-custom-content">
          <button type="button" class="btn box-close-item" aria-label="Close"> <i class="fa fa-close"></i></button>
          Etherium
        </div>
        <!-- Safe zone ends -->
      </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="ADA">
        <div class="item-content">
          <!-- Safe zone, enter your custom markup -->
          <div class="my-custom-content">
            Cardano 
          </div>
          <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="CAKE">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
              PancakeSwap 
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="KAT">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
              Kambria 
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>


    <div class="item bg-light col" crypto-dash-id="XRP">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        XRP
        <!-- Safe zone ends -->
      </div>
    </div>
  
    <div class="item bg-light col" crypto-dash-id="DOGE">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        <div class="my-custom-content">
          Dodgecoin 
        </div>
        <!-- Safe zone ends -->
      </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="SHIB">
        <div class="item-content">
          <!-- Safe zone, enter your custom markup -->
          <div class="my-custom-content">
            Shiba Inu
          </div>
          <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="XMR">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
              Monero
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="10">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="11">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        This can be anything.
        <!-- Safe zone ends -->
      </div>
    </div>
  
    <div class="item bg-light col" crypto-dash-id="12">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        <div class="my-custom-content">
          Yippee!
        </div>
        <!-- Safe zone ends -->
      </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="13">
        <div class="item-content">
          <!-- Safe zone, enter your custom markup -->
          <div class="my-custom-content">
            Yippee!
          </div>
          <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="14">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="15">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="16">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        This can be anything.
        <!-- Safe zone ends -->
      </div>
    </div>
  
    <div class="item bg-light col" crypto-dash-id="17">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        <div class="my-custom-content">
          Yippee!
        </div>
        <!-- Safe zone ends -->
      </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="18">
        <div class="item-content">
          <!-- Safe zone, enter your custom markup -->
          <div class="my-custom-content">
            Yippee!
          </div>
          <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="19">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="20">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="21">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        This can be anything.
        <!-- Safe zone ends -->
      </div>
    </div>
  
    <div class="item bg-light col" crypto-dash-id="22">
      <div class="item-content">
        <!-- Safe zone, enter your custom markup -->
        <div class="my-custom-content">
          Yippee!
        </div>
        <!-- Safe zone ends -->
      </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="23">
        <div class="item-content">
          <!-- Safe zone, enter your custom markup -->
          <div class="my-custom-content">
            Yippee!
          </div>
          <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="24">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

    <div class="item bg-light col" crypto-dash-id="25">
        <div class="item-content">
            <!-- Safe zone, enter your custom markup -->
            <div class="my-custom-content">
            Yippee!
            </div>
            <!-- Safe zone ends -->
        </div>
    </div>

  </div>


  <button id="settingsbutton" class="btn btn-lg btn-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidemenu" aria-controls="sidemenu">
    <i class="fa fa-cog"></i>
  </button>
  
  <div class="offcanvas offcanvas-start bg-light" tabindex="-1" id="sidemenu" aria-labelledby="sidemenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidemenuLabel">Crypto Dashboard</h5>
      <button id="sidemenuclose" type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      
      <div class="form-check form-switch">
        <label class="form-check-label" for="lightSwitch"> Dark Mode </label>
        <input class="form-check-input" type="checkbox" id="lightSwitch"/>
      </div>

      <label for="itemSizeRanger" class="form-label">Grid Size <span class="badge bg-secondary" id="gridsizeSpan">Dudu</span> </label>
      <input type="range" class="form-range" min="190" max="570" step="10" id="itemSizeRanger" data-bs-toggle="tooltip" data-bs-placement="top" title="VALUE">


      <label for="cryptodashConfig" class="form-label">Configuration</label>
      <div id="cryptodashConfig" class="btn-group" role="group" aria-label="Configuration">
        <button type="button" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#resetcryptodashconfigmodal"><i class="fa fa-recycle"></i></button>
        <button type="button" class="btn btn-primary"><i class="fa fa-upload"></i></button>
      </div>


        <button class="btn btn-primary">Background type</button>
        <button class="btn btn-primary">Background Resolution</button>
        <button class="btn btn-primary">Background Color </button>
        <button class="btn btn-primary">Grid Element Size (slider)</button>
      
      
      
      
      

      <a href="https://github.com/mprajescu/cryptodash"><i class="fa fa-github"></i> CryptoDash v1 <span id="date"></span></a>
    </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="resetcryptodashconfigmodal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="resetcryptodashconfigmodallabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-light" id="resetcryptodashconfigmodalmodalcontent">
        <div class="modal-header">
          <h5 class="modal-title" id="resetcryptodashconfigmodallabel">Confirm</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="resetcryptodashconfigmodalclose"></button>
        </div>
        <div class="modal-body">
          Do you want to remove the local storage configuration for Crypto Dash?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">No</button>
          <button type="button" class="btn btn-primary" onclick="resetCryptoDashConfig()" data-bs-dismiss="modal">Yes</button>
        </div>
      </div>
    </div>
  </div>





  




    



  
    
  

</div>




</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>


<script type="text/javascript">

// Loader

const loader = document.querySelector('#loader');

window.addEventListener('load', (event) => {

const fadeEffect = setInterval(() => {
    // if we don't set opacity 1 in CSS, then
    // it will be equaled to "" -- that's why
    // we check it, and if so, set opacity to 1
    if (!loader.style.opacity) {
        loader.style.opacity = 1;
        cryptodashcontent.style.opacity = 0;
    }
    if (loader.style.opacity > 0) {
        loader.style.opacity -= 0.1;
        cryptodashcontent.style.opacity += 1;
        
        
    } else {
      clearInterval(fadeEffect);
    }

  }, 100);

});

// Sets a variable in local storage
//localStorage.setItem('myCat', 'Tom');

// User Settings
// Default Items

// Background color


// Reads a variable from local storage
//const cat = localStorage.getItem('myCat');

// Removes a variable from local storage
//localStorage.removeItem('myCat');

// Clears all local storage
// Will be a button
//localStorage.clear();

// Copyright date bottom right 
n =  new Date();
y = n.getFullYear();
m = n.getMonth() + 1;
d = n.getDate();

document.getElementById("date").innerHTML = d + "/" + m + "/" + y;


function resetCryptoDashConfig() {
  localStorage.clear();
  location.reload();
}


// GRID


var grid = new Muuri('.grid', {
  
  dragEnabled: true,
  layoutOnInit: false

}).on('move', function () {
  saveLayout(grid);
});

var layout = window.localStorage.getItem('layout');
var cardItemWidth = window.localStorage.getItem('cardItemWidth');
var cardItemHeight = window.localStorage.getItem('cardItemHeight');
if (layout) {
  loadLayout(grid, layout);
} else {
  grid.layout(true);
}

if (cardItemWidth && cardItemHeight) {
  document.querySelectorAll(".item").forEach((element) => {
    element.style.width = cardItemWidth;
    element.style.height = cardItemHeight;
  });

  var itemSizeRanger = document.getElementById("itemSizeRanger");

  itemSizeRanger.value = cardItemWidth.substring(0, cardItemWidth.length - 2);
  grid.refreshItems();
  grid.layout();
} else {
  var itemSizeRanger = document.getElementById("itemSizeRanger");
  

  itemSizeRanger.value = 420;
  itemSizeRanger.title = itemSizeRanger.value;
  //document.getElementById("gridsizeSpan").innerHTML(itemSizeRanger.value);
}



function serializeLayout(grid) {
  var itemIds = grid.getItems().map(function (item) {
    return item.getElement().getAttribute('crypto-dash-id');
  });
  return JSON.stringify(itemIds);
}

function saveLayout(grid) {
  var layout = serializeLayout(grid);
  window.localStorage.setItem('layout', layout);
}

function loadLayout(grid, serializedLayout) {
  var layout = JSON.parse(serializedLayout);
  var currentItems = grid.getItems();
  var currentItemIds = currentItems.map(function (item) {
    return item.getElement().getAttribute('crypto-dash-id')
  });
  var newItems = [];
  var itemId;
  var itemIndex;

  for (var i = 0; i < layout.length; i++) {
    itemId = layout[i];
    itemIndex = currentItemIds.indexOf(itemId);
    if (itemIndex > -1) {
      newItems.push(currentItems[itemIndex])
    }
  }

  grid.sort(newItems, {layout: 'instant'});
}


//https://github.com/haltu/muuri#grid-option-showeasing









(function () {
  let lightSwitch = document.getElementById("lightSwitch");
  if (!lightSwitch) {
    return;
  }
  
  /**
   * @function darkmode
   * @summary: changes the theme to 'dark mode' and save settings to local stroage.
   * Basically, replaces/toggles every CSS class that has '-light' class with '-dark'
   */
  function darkMode() {
    document.querySelectorAll(".bg-light").forEach((element) => {
      element.className = element.className.replace(/-light/g, "-dark");
    });

    document.body.classList.add("bg-dark");
    document.getElementById("sidemenuclose").classList.add("bg-light");
    document.getElementById("sidemenuclose").classList.remove("bg-dark");
    document.getElementById("settingsbutton").classList.add("btn-dark");
    document.getElementById("settingsbutton").classList.remove("btn-light");

    //reset config modal close button & modal
    document.getElementById("resetcryptodashconfigmodalclose").classList.add("bg-light");
    document.getElementById("resetcryptodashconfigmodalclose").classList.remove("bg-dark");
    document.getElementById("resetcryptodashconfigmodalmodalcontent").classList.add("bg-dark");
    document.getElementById("resetcryptodashconfigmodalmodalcontent").classList.remove("bg-light");



    document.querySelectorAll(".box-close-item").forEach((element) => {
      element.classList.add("btn-light");
      element.classList.remove("btn-dark");
    });

    if (document.body.classList.contains("text-dark")) {
      document.body.classList.replace("text-dark", "text-light");
    } else {
      document.body.classList.add("text-light");
    }
    
    

    // set light switch input to true
    if (! lightSwitch.checked) {
      lightSwitch.checked = true;
    }
    localStorage.setItem("lightSwitch", "dark");
  }

  /**
   * @function lightmode
   * @summary: changes the theme to 'light mode' and save settings to local stroage.
   */
  function lightMode() {
    document.querySelectorAll(".bg-dark").forEach((element) => {
      element.className = element.className.replace(/-dark/g, "-light");
    });

    document.body.classList.add("bg-light");
    document.getElementById("settingsbutton").classList.add("btn-light");
    document.getElementById("settingsbutton").classList.remove("btn-dark");

    document.querySelectorAll(".box-close-item").forEach((element) => {
      element.classList.add("btn-dark");
      element.classList.remove("btn-light");
    });
    

    if (document.body.classList.contains("text-light")) {
      document.body.classList.replace("text-light", "text-dark");
    } else {
      document.body.classList.add("text-dark");
    }
    
    

    if (lightSwitch.checked) {
      lightSwitch.checked = false;
    }
    localStorage.setItem("lightSwitch", "light");
  }
  
  /**
   * @function onToggleMode
   * @summary: the event handler attached to the switch. calling @darkMode or @lightMode depending on the checked state.
   */
  function onToggleMode() {
    if (lightSwitch.checked) {
      darkMode();

    } else {
      lightMode();
    }
  }
  
  /**
   * @function getSystemDefaultTheme
   * @summary: get system default theme by media query
   */
  function getSystemDefaultTheme() {
    const darkThemeMq = window.matchMedia("(prefers-color-scheme: dark)");
    if (darkThemeMq.matches) {
      return "dark";
    }
    return "light";
  }

  function setup() {
    var settings = localStorage.getItem("lightSwitch");
    if (settings == null) {
      settings = getSystemDefaultTheme();
    }
    
    if (settings == "dark") {
      document.getElementById("sidemenuclose").classList.add("bg-light");
      lightSwitch.checked = true;
      

    }
    
    lightSwitch.addEventListener("change", onToggleMode);
    onToggleMode();
  }
  
  setup();
  
})();










// Sldier to change width

var itemSizeRanger = document.getElementById("itemSizeRanger");



itemSizeRanger.oninput = function() {
  
  document.querySelectorAll(".item").forEach((element) => {
    
    element.style.width = itemSizeRanger.value + "px";
    
    element.style.height = itemSizeRanger.value + "px";
    
    

  });
  
  //console.log("setting item width to: " + itemSizeRanger.value + "px");
  //console.log("setting item height to: " + itemSizeRanger.value + "px");
  
  localStorage.setItem('cardItemWidth', itemSizeRanger.value + "px");
  localStorage.setItem('cardItemHeight', itemSizeRanger.value + "px");

  itemSizeRanger.title = itemSizeRanger.value;
  //document.getElementById("gridsizeSpan").innerHTML(itemSizeRanger.value);

  grid.refreshItems();
  grid.layout();
  
}

</script>

</html>
