<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="application-name" content="Crypto Dash">
<meta name="description" content="Crypto Currency Tracker Dashboard">
<meta name="keywords" content="HTML, CSS, JavaScript, Crypto">
<meta name="author" content="Mihail-Vlad Prajescu">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Bootstrap 5.1.3 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" type="text/css">

<!-- Tom Select 2.0.0 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/css/tom-select.bootstrap5.min.css" type="text/css">

<!-- FontAwesome 4.6.3 CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" type="text/css">

<!-- Toastify Javascript -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" type="text/css">




<!-- Muuri 0.9.5 JS -->
<script src="https://cdn.jsdelivr.net/npm/muuri@0.9.5/dist/muuri.min.js"></script>

<!-- Web Animations 2.3.2 JS -->
<script src="https://cdn.jsdelivr.net/npm/web-animations-js@2.3.2/web-animations.min.js"></script>

<!-- Big Number JS 9.0.1 JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/9.0.1/bignumber.min.js" integrity="sha512-3dEpIO2t/6beQ77U/aYgVqJpmSkcvWuTFO4WhCQrSi2tSQV3U+k4plwSKlVOxKibsnd6Z/0evmClsMl4LVZ7Ig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- Toastify JS-->
<script  src="https://cdn.jsdelivr.net/npm/toastify-js" type="text/javascript"></script>

<!-- Maybe implement themes in the future -->
<!-- Themes from https://bootswatch.com/ -->
<!--<link href="https://bootswatch.com/5/materia/bootstrap.min.css" rel="stylesheet">-->

<!-- // USD/GBP/EUR 
// Last hour comparison 
// 24 hours comparison-->

<title> Crypto Dash </title>

<style>

* {
    box-sizing: border-box;
}

body {
  
	font-family: sans-serif;
	margin-left: 40px;
  margin-right: 40px;
  margin-top: 60px;
  margin-bottom: 40px;
  
  background-size: 110%;
  background: #282537 no-repeat center fixed;  
  background-image: -webkit-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: -moz-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: -o-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
     
  background-size: cover;
	
}


/* Custom Bootstrap  

  .offcanvas {
    background-color: rgba(0, 0, 0, .50);
	backdrop-filter: blur(10px);
  
} */

.btn {
  border: 0px !important;
}

:root {
  --frosted-bg-color: rgba(255, 255, 255, 0.25);
  --frosted-tracker-bg-color: rgba(255, 255, 255, 0.50);
  --cryptodash-main-bg-color: #282537;
  --cryptodash-gradient-bg-color-1: #3c3b52;
  --cryptodash-gradient-bg-color-2: #252233;
}


.cryptodash-bg-simple {
  background-size: 110%;
  background: #282537 no-repeat center fixed;  
  background-image: -webkit-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: -moz-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: -o-radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
  background-image: radial-gradient(top, circle cover, #3c3b52 0%, #252233 80%);
     
  background-size: cover;
}

.cryptodash-bg-custom {
  background-size: 110%;
  background: var(--cryptodash-main-bg-color) no-repeat center fixed; ;
  background-image: -webkit-radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-image: -moz-radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-image: -o-radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-image: radial-gradient(top, circle cover, var(--cryptodash-gradient-bg-color-1) 0%, var(--cryptodash-gradient-bg-color-2) 80%);
  background-size: cover;
}

.cryptodash-bg-image-gradient-hd {
  background-size: 110%;
	
	background: url(https://source.unsplash.com/1920x1080/?gradient) no-repeat center fixed;     
  background-size: cover;
}

.cryptodash-bg-image-abstract-hd {
  background-size: 110%;
	
	background: url(https://source.unsplash.com/1920x1080/?abstract) no-repeat center fixed;     
  background-size: cover;
}

.cryptodash-bg-image-gradient-4k {
  background-size: 110%;
	
	background: url(https://source.unsplash.com/3840x2160/?gradient) no-repeat center fixed;     
  background-size: cover;
}

.cryptodash-bg-image-abstract-4k {
  background-size: 110%;
	
	background: url(https://source.unsplash.com/3840x2160/?abstract) no-repeat center fixed;     
  background-size: cover;
}




/* About Button in Crpyto Dash Side Bar */
#cryptodash-about{
  position: fixed;
  width: 370px;
  bottom: 5px;
}



/* *** GRID *** */

/* Grid style */
.cryptodash-grid {
  position: relative;
}

/* Tracker style */
.cryptodash-tracker {
  display: block;
  position: absolute;
  /* background: #ffffff; */
  width: 420px;
  height: 420px;
  margin: 20px;
  padding: 10px;
  z-index: 1;
  border-radius: 40px;
  box-shadow:  0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
  background-size: cover;
  font-size: calc(3 vw + 3 vh);
}

/* Tracker content style */
.cryptodash-tracker-content {
  border-radius: 40px;
  position: relative;
  width: 100%;
  height: 100%;
  
  align-items: center;
  justify-content: center;
  background-size: cover;
  padding:10px;
}

.cryptodash-tracker::before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  background-color: var(--frosted-tracker-bg-color);
  /*backdrop-filter: blur(2px); */
  backdrop-filter: blur(45px);
  border-radius: 40px;
  padding: 10px;
}

.cryptodash-tracker-content img {
  width: 60px;
  position: absolute;
  top: 10px;
  right: 10px;
  border-radius: 50%;
}

.cryptodash-tracker-content h1 {
  font-size: 2em;
}
.cryptodash-tracker-content h2 {
  font-size: 1.2em;
}

p[id$="updatetime"] {
  bottom: -20px;
  position: absolute;
  margin-left: -10px;
  margin-right: -10px;
  align-items: center;
  justify-content: center;
  text-align: center;
  width: 100%;
  font-size: 0.8em;
  
}


#cryptodash-currency {
  text-align: center;
}

.cryptodash-datasources {
  text-align: center;
}

/* FROSTED 
.bg-light {
    --bs-bg-opacity: 0; <------
    background-color: rgba(var(--bs-light-rgb),var(--bs-bg-opacity))!important;
}

*/

.cryptodash-positive {
  
  animation: pulsate-green 1.5s ease-in infinite, grow 0.75s alternate infinite ease-in;
  box-shadow:  0px 0px 40px 10px rgba(5, 255, 0, 0.3),0px 0px 30px -30px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(5, 255, 0, 0.3),0px 0px 30px -30px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(5, 255, 0, 0.3),0px 0px 30px -30px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);

  
}



.cryptodash-negative {

  animation: pulsate-red 5s ease-out, grow 2.5s ease-out;

  box-shadow: 0px 0px 20px 5px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0px 0px 20px 5px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
-moz-box-shadow: 0px 0px 20px 5px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);

        /* outer right cyan */
}


@keyframes pulsate-green {
  0%   { box-shadow:  0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -10px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -10px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -10px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2); }
    
  25%  { box-shadow:  0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2); }  

  50%  { box-shadow:  0px 0px 40px 20px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 20px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 20px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2); }

  75%  { box-shadow:  0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -20px rgba(0, 255, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2); } 

  100% { box-shadow:  0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -10px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -10px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(0, 255, 0, 0.7),0px 0px 30px -10px rgba(0, 255, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2); }
}


@keyframes pulsate-red {
  0%   { box-shadow:  0px 0px 40px 10px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2); }

  50%  { box-shadow:  0px 0px 40px 40px rgba(255, 0, 0, 0.7),0px 0px 30px -10px rgba(255, 0, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 40px rgba(255, 0, 0, 0.7),0px 0px 30px -10px rgba(255, 0, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 40px rgba(255, 0, 0, 0.7),0px 0px 30px -10px rgba(255, 0, 0, 0.2),0px 0px 6px 5px rgba(0, 0, 0, 0.2); }

  100% { box-shadow:  0px 0px 40px 10px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 0px 40px 10px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2);
    -moz-box-shadow: 0px 0px 40px 10px rgba(255, 0, 0, 0.7),0px 0px 30px -30px rgba(255, 0, 0, 0.2),0px 0px 6px 3px rgba(0, 0, 0, 0.2); }
}



@keyframes grow {
  0%   {transform: scale(1);}
  100% {transform: scale(1.1);}
}




.backdrop-blur {
  background-color: var(--frosted-bg-color);
}
 
/* if backdrop support: very transparent and blurred */
@supports ((-webkit-backdrop-filter: blur(1em)) or (backdrop-filter: blur(1em))) {
  .backdrop-blur {
    background-color: var(--frosted-bg-color);
    -webkit-backdrop-filter: blur(1em);
    backdrop-filter: blur(1em);
  }
}


.tracker-backdrop-blur {
  background-color: var(--frosted-tracker-bg-color);
}

/* if backdrop support: very transparent and blurred */
@supports ((-webkit-backdrop-filter: blur(4em)) or (backdrop-filter: blur(4em))) {
  .tracker-backdrop-blur {
    background-color: var(--frosted-tracker-bg-color);
    -webkit-backdrop-filter: blur(4em);
    backdrop-filter: blur(4em);
  }
}


#cryptodash-settings-menu {
  
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
  
}

 

/* Tracker Draging */
.cryptodash-tracker.muuri-item-dragging {
    z-index: 3;
}
.cryptodash-tracker.muuri-item-releasing {
    z-index: 2;
}
.cryptodash-tracker.muuri-item-hidden {
    z-index: 0;
}


/* *** Loader *** */



/*


#cryptodash-loader {
  background: white;
  padding: 16px 24px;
  position:fixed;
  top:50%;
  left:50%;
  border-radius: 8px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.01);
}
#cryptodash-loader::after {
  position: absolute;
  content: "";
  top: 15px;
  left: 0;
  right: 0;
  z-index: -1;
  height: 100%;
  width: 100%;
  transform: scale(0.9) translateZ(0);
  filter: blur(15px);
  background: linear-gradient(to left, #ff5770, #e4428d, #c42da8, #9e16c3, #6501de, #9e16c3, #c42da8, #e4428d, #ff5770);
  background-size: 200% 200%;
  -webkit-animation: animateGlow 1.25s linear infinite;
          animation: animateGlow 1.25s linear infinite;
}

@-webkit-keyframes animateGlow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

@keyframes animateGlow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}


*/



#cryptodash-loader{
  width:100px;
  height:80px;
  position:fixed;
  top:50%;
  left:50%;
  margin-top:-40px;
  margin-left:-50px;
}
  
.cryptodash-loader-inner{
  -webkit-animation:rotate 0.8s linear infinite;
  -moz-animation:rotate 0.8s linear infinite;
  animation:rotate 0.8s linear infinite;
  margin-top:20px;
  border-radius:50%;
  width:50px;
  height:50px;
  position:absolute;
}
  
.cryptodash-rotate-one{
  left:50%;
  margin-left:-25px;
  border-top:2px solid #1f6d8f;
}
  
.cryptodash-rotate-two{
  top:-10px;
  left:30px;
  border-left:2px solid #1f6d8f;
}
  
.cryptodash-rotate-three{
  top:-10px;
  right:30px;
  border-right:2px solid #1f6d8f;
}
  
@-webkit-keyframes rotate{
  0%{-webkit-transform:rotateZ(0deg);}
  100%{-webkit-transform:rotateZ(360deg);}
}
  
@-moz-keyframes rotate{
  0%{-moz-transform:rotateZ(0deg);}
  100%{-moz-transform:rotateZ(360deg);}
}
  
@keyframes rotate{
  0%{transform:rotateZ(0deg);}
  100%{transform:rotateZ(360deg);}
}



/* *** Crypto Dash Buttons *** */  

/* Settings Button */
#cryptodash-settings-button {
  top: -2px;
  /*left: calc(50vw - 40px);*/
  left: -2px;
  z-index: 800;
  border-bottom-right-radius: 20px;
  position: fixed;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}

/* Refresh Button */
#cryptodash-refresh-button {
  top: -2px;
  right: -2px;
  z-index: 800;
  border-bottom-left-radius: 20px;
  position: fixed;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}


/* Settings Button */
#cryptodash-clock {
  top: -2px;
  left: calc(50vw - 80px);
  /* left: 5px;*/
  z-index: 800;
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
  position: fixed;
  box-shadow:
    0px 0px 1.1px rgba(0, 0, 0, 0.02),
    0px 0px 2.7px rgba(0, 0, 0, 0.028),
    0px 0px 5px rgba(0, 0, 0, 0.035),
    0px 0px 8.9px rgba(0, 0, 0, 0.042),
    0px 0px 16.7px rgba(0, 0, 0, 0.05),
    0px 0px 40px rgba(0, 0, 0, 0.07)
  ;
}

.toastify {
  background-image: unset;
}

</style>

</head>

<body>

<!-- Loader when page starts -->
<div id="cryptodash-loader">
  
    <div class="cryptodash-loader-inner cryptodash-rotate-one"></div>
    <div class="cryptodash-loader-inner cryptodash-rotate-two"></div>
    <div class="cryptodash-loader-inner cryptodash-rotate-three"></div>
   
</div>

<!-- Crypto Dashboard Main Content -->
<div id="cryptodash-content" style="opacity: 0;">

  <!-- Container grid where trackers are created dynamically-->
  <div class="cryptodash-grid row" id="CryptoDashContentTrackers">

  </div>

  <!-- Settings button -->
  <button id="cryptodash-settings-button" class="btn btn-lg btn-light backdrop-blur" type="button" data-bs-toggle="offcanvas" data-bs-target="#cryptodash-settings-menu" aria-controls="cryptodash-settings-menu">
    <i class="fa fa-cog fa-spin"></i>
  </button>

  <!-- Refresh button -->
  <button id="cryptodash-refresh-button" class="btn btn-lg btn-light backdrop-blur" type="button" aria-controls="refresh" onclick="manualCryptoDashFetchTrackerData()" hidden>
    <i id ="cryptodash-refresh-icon" class="fa fa-refresh "></i>
  </button>

  <!-- Clock -->
  <button id="cryptodash-clock" class="btn btn-lg backdrop-blur" type="button" aria-controls="cryptodash-clock">
    <i class="fa fa-clock-o"></i> 
  </button>
  
  <!-- Crypto Dash Settings Panel -->
  <div class="offcanvas offcanvas-start backdrop-blur" tabindex="-1" id="cryptodash-settings-menu" aria-labelledby="CryptoDashSettingsMenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="CryptoDashSettingsMenuLabel">

      <!-- Dark/Light Mode -->
      <div class="form-check form-switch" >
        <label class="form-check-label" for="CryptoDashLightSwitch"> Crypto Dashboard </label>
        <input class="form-check-input" type="checkbox" id="CryptoDashLightSwitch"/>
      </div>

    </h5>
      
      <button id="cryptodash-settings-menu-close" type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      
      <div id="blurrr">
        
      

      <!-- Crpyto Dash Settings Panel is split in 2 tabs -->

      <ul class="nav nav-pills nav-justified mb-3" id="cryptodash-settings-tab" role="tablist">
        <!-- Tracker and Data Button-->
        <li class="nav-item" role="presentation">
          <button class="btn btn-outline-dark btn-lg active" id="cryptodash-tracker-tab-button" data-bs-toggle="pill" data-bs-target="#cryptodash-tracker-tab" type="button" role="tab" aria-controls="cryptodash-tracker-tab" aria-selected="true">Trackers</button>
        </li>
        <!-- Customization Button-->
        <li class="nav-item" role="presentation">
          <button class="btn btn-outline-dark btn-lg" id="cryptodash-design-tab-button" data-bs-toggle="pill" data-bs-target="#cryptodash-design-tab" type="button" role="tab" aria-controls="cryptodash-design-tab" aria-selected="false">Design</button>
        </li>
      </ul>

      <hr>

      <div class="tab-content" id="cryptodash-settings-tab-content">
        <!-- Tracker and Data Content-->
        <div class="tab-pane fade show active" id="cryptodash-tracker-tab" role="tabpanel" aria-labelledby="cryptodash-tracker-tab-button">
          
          <!-- Crpyto Dash Tracker -->
          <label for="cryptodash-setup" class="form-label badge bg-secondary">Crypto Setup</label>

          <div id="cryptodash-setup" class="d-grid gap-2">
            <div id="cryptodash-setup-buttons" class="btn-group" role="group" aria-label="Trackers and Data Source">

              <button type="button" class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#manageCryptoDashDataSourceModal"> Data Source</button>  
              <button type="button" class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#manageCryptoDashCoinsModal"> Manage Trackers</button>
      
            </div>
          </div>

          <hr>

          <!-- Currency Selector -->
          <label for="cryptodash-currency" class="form-label badge bg-secondary">Currency</label>
          <div id="cryptodash-currency" class="gap-2"> 
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="cryptodash-currency" id="cryptodash-currency-usd" value="USD" checked>
              <label class="form-check-label" for="cryptodash-currency-usd">USD</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="cryptodash-currency" id="cryptodash-currency-eur" value="EUR">
              <label class="form-check-label" for="cryptodash-currency-eur">EUR</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="cryptodash-currency" id="cryptodash-currency-gbp" value="GBP">
              <label class="form-check-label" for="cryptodash-currency-gbp">GBP</label>
            </div>
          </div>

          <hr>

          <!-- Automatic Refresh Switch and Time Poll Interval Slider-->
          <label for="refreshRanger" class="form-label badge bg-secondary">Refresh rate (seconds): <span id="dataRefreshSpan"></span> </label>
          <div class="form-check form-switch">
            <label class="form-check-label" for="CryptoDashDataRefreshSwitch"> Data Auto Refresh </label>
            <input class="form-check-input" type="checkbox" id="CryptoDashDataRefreshSwitch"/>
          </div>

          
          <input type="range" class="form-range" min="60" max="1800" step="60" id="refreshRanger" data-bs-toggle="tooltip" data-bs-placement="top" title="VALUE" disabled>
          


        </div>

        <!-- Customization Content-->
        <div class="tab-pane fade" id="cryptodash-design-tab" role="tabpanel" aria-labelledby="cryptodash-design-tab-button">
          
          <!-- Customization -->

          


          <!-- Grid Size -->
          <label for="itemSizeRanger" class="form-label badge bg-secondary">Tracker Size: <span id="gridsizeSpan"></span> </label>
          <input type="range" class="form-range" min="265" max="570" step="1" id="itemSizeRanger" data-bs-toggle="tooltip" data-bs-placement="top" title="VALUE">

          <hr>
          




          <!-- Background Customization -->
          <label for="cryptodashbackground" class="form-label badge bg-secondary">Background</label>



          <ul id="cryptodash-bg-type-buttons" class="nav nav-pills nav-justified mb-3" role="tablist" aria-label="Background Type">
            
            <li class="nav-item" role="bgselector">
              <button class="btn btn-outline-dark btn-sm active" id="cryptodash-bg-simple-button" data-bs-toggle="pill" data-bs-target="#cryptodash-bg-simple-tab" type="button" role="tab" aria-controls="cryptodash-bg-single-color-tab" aria-selected="true">Simple</button>
            </li>
            <li class="nav-item" role="bgselector">
              <button class="btn btn-outline-dark btn-sm btn-sm" id="cryptodash-bg-gradient-button" data-bs-toggle="pill" data-bs-target="#cryptodash-bg-gradient-tab" type="button" role="tab" aria-controls="cryptodash-bg-gradient-tab" aria-selected="false">Gradient</button>
            </li>
            <li class="nav-item" role="bgselector">
              <button class="btn btn-outline-dark btn-sm btn-sm" id="cryptodash-bg-abstract-button" data-bs-toggle="pill" data-bs-target="#cryptodash-bg-abstract-tab" type="button" role="tab" aria-controls="cryptodash-bg-abstract-tab" aria-selected="false">Abstract</button>
            </li>          
            
          </ul>
      
    
          <div class="tab-content" id="cryptodash-bg-content">
            <!-- Tracker and Data Content-->
            <div class="tab-pane fade show active" id="cryptodash-bg-simple-tab" role="tabpanel" aria-labelledby="cryptodash-bg-simple-button">
              
              <div class="d-grid gap-2"> 

                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-simple-color">Default </button> 
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-custom-color">Random </button>
            
            
        
            
              </div>
              

            </div>

            <div class="tab-pane fade" id="cryptodash-bg-gradient-tab" role="tabpanel" aria-labelledby="cryptodash-bg-gradient-button">
              
              <div class="d-grid gap-2"> 
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-gradient-hd">HD (1920x1080) </button>
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-gradient-4k">4K (3840x2160) </button> <!--(dependent on gradient & abstract only)-->
              </div>

            </div>

            <div class="tab-pane fade" id="cryptodash-bg-abstract-tab" role="tabpanel" aria-labelledby="cryptodash-bg-abstract-button">
              <div class="d-grid gap-2"> 
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-abstract-hd">HD (1920x1080) </button>
                <button class="btn btn-outline-dark btn-sm" id="cryptodash-bg-abstract-4k">4K (3840x2160) </button> <!--(dependent on gradient & abstract only)-->
              </div>
            </div>

          </div>


          <div id="cryptodashbackground" class="d-grid gap-2"> 

                     
            
        
          </div>


        </div>

        </div>    

      </div>




	  
      
        
      <hr>

      <!-- Configuration Options -->
      <label for="cryptodashConfig" class="form-label badge bg-secondary">Configuration Backup</label>
      <div id="cryptodashsettings" class="d-grid gap-2">
        <div id="cryptodashConfig" class="btn-group" role="group" aria-label="Configuration">
          <button type="button" class="btn btn-outline-dark btn-sm" onclick="saveCryptoDashConfig()"><i class="fa fa-save"></i> Save</button>
          <button type="button" class="btn btn-outline-dark btn-sm" data-bs-toggle="modal" data-bs-target="#resetCryptoDashConfigModal"><i class="fa fa-recycle"></i> Reset</button>
          <button type="button" class="btn btn-outline-dark btn-sm" onclick="uploadCryptoDashConfig()"><i class="fa fa-upload"></i> Upload</button>
        </div>
      </div>
      
      
      <div id="cryptodash-about" class="d-grid gap-2">
        <a class="btn btn-outline-dark btn-sm" href="https://github.com/mprajescu/cryptodash"><i class="fa fa-github"></i> CryptoDash <span id="cryptodash-date"></span></a>
      </div>
      

      
    </div>
  </div>


  <!-- Reset Config Modal Modal -->
  <div class="modal fade" id="resetCryptoDashConfigModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="resetCryptoDashConfigModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-light backdrop-blur" id="resetCryptoDashConfigModalContent">
        <div class="modal-header">
          <h5 class="modal-title" id="resetCryptoDashConfigModalLabel">Reset Crypto Dashboard Configuration</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="resetCryptoDashConfigModalClose"></button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want reset the configuration?</p>
      
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-dark btn-sm me-auto" onclick="resetCryptoDashConfig()" data-bs-dismiss="modal"><i class="fa fa-recycle"></i> Reset</button>
          <button type="button" class="btn btn-outline-dark btn-sm me-auto" onclick="saveCryptoDashConfig()"><i class="fa fa-save"></i> Save Config File</button>           
          <button type="button" class="btn btn-outline-dark btn-sm" data-bs-dismiss="modal">Cancel</button>
          
           
          
          
          
        </div>
      </div>
    </div>
  </div>

  <!-- Upload Config Modal-->
  <div class="modal fade " id="uploadCryptoDashConfigModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="uploadCryptoDashConfigModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content bg-light backdrop-blur" id="uploadCryptoDashConfigModalContent">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadCryptoDashConfigModalLabel">Upload Crypto Dash Config File</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="uploadCryptoDashConfigModalClose"></button>
        </div>

        <form id="uploadCryptoDashConfigForm">

          <div class="modal-body">
            <input class="form-control bg-light" type="file" id="uploadCryptoDashConfigInput" accept=".json" >
          </div>
          <div class="modal-footer">
            
            
            <button type="submit" class="btn btn-outline-dark btn-sm me-auto">Upload</button>
            <button type="button" class="btn btn-outline-dark btn-sm" data-bs-dismiss="modal">Cancel</button>
          </div>

        </form>
        

      </div>
    </div>
  </div>

  
    
  



  <!-- Modal -->
<div class="modal fade " id="manageCryptoDashCoinsModal" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1" aria-labelledby="manageCryptoDashCoinsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-light backdrop-blur" id="manageCryptoDashCoinsModalContent">
      <div class="modal-header">
        <h5 class="modal-title" id="manageCryptoDashCoinsModalLabel">Crypto Trackers</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="manageCryptoDashCoinsModalClose"></button>
      </div>
      <div class="modal-body">
        
      <p> Search and add coins to be tracked </p>
      
        <select id="CryptoDashCoinsSelector" multiple placeholder="">
            <!--
            <option value="BTC">Bitcoin</option>
            <option value="ETH">Etherium</option>
            <option value="XRP">Ripple</option>
            <option value="CAKE">PancakeSwap</option>
            <option value="DOGE">Dodgecoin</option>
            <option value="KAT">Kambria</option>
            <option value="SHIB">Shiba Inu</option>
            <option value="XMR">Monero</option>
            -->
          
        </select>
        
		
		
		
      </div>
    
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade " id="manageCryptoDashDataSourceModal" data-bs-backdrop="static" data-bs-keyboard="true" tabindex="-1" aria-labelledby="manageCryptoDashDataSourceModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-light backdrop-blur" id="manageCryptoDashDataSourceModalContent">
      <div class="modal-header">
        <h5 class="modal-title" id="manageCryptoDashDataSourceModalLabel">Data Sources</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="manageCryptoDashDataSourceModalClose"></button>
      </div>
      <div class="modal-body">
              
     
        <p>Please take into consideration that when a refresh or an auto refresh is done, even a manual data refresh, it will count towards your API Requests.</p>
        <p>You can calculate and see your API calls in realtime on Crypto Compare or Coin Market Cap.</p>
        <p>Before getting the API Key and use it, make sure you understand that having the auto refresh rate sooner would use more requests.</p>

        <hr>
        <!-- datasource Selector -->
        <a href="https://cryptocompare.com" target="_blank"><label for="cryptodash-datasource-cryptocompare" class="form-label badge bg-secondary">Crypto Compare</label></a>
        
        <div id="cryptodash-datasource-cryptocompare" class="gap-2 cryptodash-datasources"> 
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="cryptodash-datasource" id="cryptodash-datasource-cryptocompare-free" value="CryptoCompareFree" checked>
            <label class="form-check-label" for="cryptodash-datasource-cryptocompare-free">Free (default)</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="cryptodash-datasource" id="cryptodash-datasource-cryptocompare-api" value="CryptoCompareAPI">
            <label class="form-check-label" for="cryptodash-datasource-cryptocompare-api">API</label>
          </div>
        </div>  

        <hr>

        <a href="https://coinmarketcap.com" target="_blank"><label for="cryptodash-datasource-coinmarketcap" class="form-label badge bg-secondary">Coin Market Cap</label></a>
        
        <div id="cryptodash-datasource-coinmarketcap" class="gap-2 cryptodash-datasources"> 
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="cryptodash-datasource" id="cryptodash-datasource-coinmarketcap-api" value="CoinMarketCapAPI">
            <label class="form-check-label" for="cryptodash-datasource-coinmarketcap-api">API</label>
          </div>
        </div> 

        <hr>
        <div id="" class="d-grid gap-2">
          <div class="btn-group" role="group" aria-label="Get API Keys">
            <a href="https://min-api.cryptocompare.com/pricing" target="_blank" class="btn btn-outline-dark btn-sm ">Get a Crypto Compare API Key</a>
            <a href="https://coinmarketcap.com/api/pricing/" target="_blank" class="btn btn-outline-dark btn-sm">Get a Coin Market Cap API Key</a>
              </div>
          </div>
        
        
		
      </div>
      <div class="modal-footer">
        
        <div class="input-group mb-3">
          <span class="input-group-text" id="cryptodash-apikey">API KEY</span>
          <input type="text" class="form-control" placeholder="API Key" aria-label="API Key" aria-describedby="cryptodash-apikey" disabled>
        </div>
        
      </div>
    
    </div>
  </div>
</div>
  


<div aria-live="polite" aria-atomic="true" class="position-relative">
  <!-- Position it: -->
  <!-- - `.toast-container` for spacing between toasts -->
  <!-- - `.position-absolute`, `top-0` & `end-0` to position the toasts in the upper right corner -->
  <!-- - `.p-3` to prevent the toasts from sticking to the edge of the container  -->
  <div class="toast-container position-absolute top-0 end-0 p-3">

    <div class="position-fixed top-0 end-0 m-4" style="z-index: 999">
      <div id="liveToast" class="toast backdrop-blur" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header ">
          
          <strong class="me-auto"> <i class="fa fa-warning"></i> Browser not supported!</strong>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
          
        </div>
        <div class="toast-body  ">
          <p>Your browser doesn't support a stable version of IndexedDB. You can use one of these browsers below.</p>
          <div class="mt-2 pt-2">
            <div class="btn-group" role="group" aria-label="Browsers">
              <a class="btn btn-outline-dark btn-sm" href="https://www.microsoft.com/en-us/edge">Microsoft Edge</a>
              <a class="btn btn-outline-dark btn-sm" href="https://www.google.com/intl/en_us/chrome/">Google Chrome</a>
              <a class="btn btn-outline-dark btn-sm" href="https://www.mozilla.org/en-GB/firefox/new/">Mozilla Firefox</a>
            </div>
              
            </p>
          </div>
        </div>
      </div>
    </div>   


    <div class="position-fixed top-0 end-0 m-4" style="z-index: 999">
      <div id="toast1" class="toast backdrop-blur" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header ">
          
          <strong class="me-auto"> <i class="fa fa-warning"></i> Browser not supported!</strong>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
          
        </div>
        <div class="toast-body  ">
          <p>Your browser doesn't support a stable version of IndexedDB. You can use one of these browsers below.</p>
          <div class="mt-2 pt-2">
            <div class="btn-group" role="group" aria-label="Browsers">
              <a class="btn btn-outline-dark btn-sm" href="https://www.microsoft.com/en-us/edge">Microsoft Edge</a>
              <a class="btn btn-outline-dark btn-sm" href="https://www.google.com/intl/en_us/chrome/">Google Chrome</a>
              <a class="btn btn-outline-dark btn-sm" href="https://www.mozilla.org/en-GB/firefox/new/">Mozilla Firefox</a>
            </div>
              
            </p>
          </div>
        </div>
      </div>
    </div>
  
    </div>
  </div>

  

</div>




</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/js/tom-select.complete.min.js"></script>

<script type="text/javascript">

// Declaring variables outside of function 

//CryptoDash Currency

var CryptoDashCurrency = window.localStorage.getItem('CryptoDashCurrency');








// cryptodash-loader
const CryptoDashLoader = document.querySelector('#cryptodash-loader');
const CryptoDashContent = document.getElementById('cryptodash-content');



window.addEventListener('load', (event) => {

  const fadeEffect = setInterval(() => {
    // if we don't set opacity 1 in CSS, then
    // it will be equaled to "" -- that's why
    // we check it, and if so, set opacity to 1
    if (!CryptoDashLoader.style.opacity) {
      CryptoDashLoader.style.opacity = 1;
      CryptoDashContent.style.opacity = 0;
    }

    if (CryptoDashLoader.style.opacity > 0) {
      CryptoDashLoader.style.opacity -= 0.1;
      CryptoDashContent.style.opacity = 1;
            
    } else {
      clearInterval(fadeEffect);
    }

  }, 200);

});


// Indexed DB Checks

window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || 
window.msIndexedDB;
 
window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || 
window.msIDBTransaction;
window.IDBKeyRange = window.IDBKeyRange || 
window.webkitIDBKeyRange || window.msIDBKeyRange
 
//if (!window.indexedDB) {

if (!window.indexedDB) {

  /*
  var toastElList = [].slice.call(document.querySelectorAll('.toast'))
  var toastList = toastElList.map(function(toastEl) {
  // Creates an array of toasts (it only initializes them)
    return new bootstrap.Toast(toastEl) // No need for options; use the default options
  });
  toastList.forEach(toast => toast.show()); // This show them
  //CryptoDashLoader.style.display = "block";
  //CryptoDashContent.style.display = "none";
  //alert.close()

  document.getElementById("liveToast").classList.add("show");
  document.getElementById("liveToast").classList.remove("hide");

  */

  Toastify({
    text: ` 
    <div class="toast-body bordered ">
    <p class="">Your browser does not support a stable version of IndexedDB. <br> You can use one of these browsers below.</p>
          <div class="mt-2 pt-2">
            <div class="btn-group" role="group" aria-label="Browsers">
              <a class="btn btn-outline-dark btn-sm" href="https://www.microsoft.com/en-us/edge">Microsoft Edge</a>
              <a class="btn btn-outline-dark btn-sm" href="https://www.google.com/intl/en_us/chrome/">Google Chrome</a>
              <a class="btn btn-outline-dark btn-sm" href="https://www.mozilla.org/en-GB/firefox/new/">Mozilla Firefox</a>
            </div>
              
          </div>
          </div>`
    
    ,
    duration: -1,
    className: "tracker-backdrop-blur",
    newWindow: true,
    close: false,
    gravity: "top", // `top` or `bottom`
    position: "right", // `left`, `center` or `right`
    stopOnFocus: true, // Prevents dismissing of toast on hover
    escapeMarkup: false,
    
    style: {
      /*
      background: "linear-gradient(to right, #00b09b, #96c93d)",
      */
      boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
      borderRadius: "20px",
      
    },
    
    


    onClick: function(){} // Callback after click
  }).showToast();


  // window.alert("Your browser doesn't support a stable version of IndexedDB.")
}



// Date in Crypto Dash menu 
const CryptoDashCurrentDate =  new Date();
CryptoDashCurrentDateYear = CryptoDashCurrentDate.getFullYear();
CryptoDashCurrentDateMonth = CryptoDashCurrentDate.getMonth() + 1;
CryptoDashCurrentDateDay = CryptoDashCurrentDate.getDate();
CryptoDashCurrentDateHour = CryptoDashCurrentDate.getHours();
CryptoDashCurrentDateMinute = CryptoDashCurrentDate.getMinutes();
CryptoDashCurrentDateDaySecond = CryptoDashCurrentDate.getSeconds();

document.getElementById("cryptodash-date").innerHTML = CryptoDashCurrentDateDay + "/" + CryptoDashCurrentDateMonth + "/" + CryptoDashCurrentDateYear;

/* CLOCK */
var CryptoDashClock = setInterval(function() {
  CryptoDashClockTimer();
}, 1000);

function CryptoDashClockTimer() {
  var d = new Date();
  document.getElementById("cryptodash-clock").innerHTML = " <i class=\"fa fa-clock-o\"></i> " + d.toLocaleTimeString();
};


// generate file to be downloaded 
function CryptoDashDownloader(content, fileName, contentType) {
  const a = document.createElement("a");
  const file = new Blob([content], { type: contentType });
  a.href = URL.createObjectURL(file);
  a.download = fileName;
  a.click();
}

// add Crypto Dash configuration Date to Local Storage
function setCryptoDashConfigDate() {
  const CryptoDashConfigDate = CryptoDashCurrentDateDay + "-" + CryptoDashCurrentDateMonth + "-" + CryptoDashCurrentDateYear;
  window.localStorage.setItem('CryptoDashConfigDate', CryptoDashConfigDate);
}





// reset the Crypto Dash configuration and refresh page
function resetCryptoDashConfig() {
  window.localStorage.clear();
  location.reload();
}

// save the Crypto Dash configuration
function saveCryptoDashConfig(){
  const CryptoDashConfig = JSON.stringify(window.localStorage);
  const CryptoDashConfigFileName = "CryptoDashConfig" + "-" + CryptoDashCurrentDateDay + "-" + CryptoDashCurrentDateMonth + "-" + CryptoDashCurrentDateYear +".json";
  CryptoDashDownloader(CryptoDashConfig, CryptoDashConfigFileName, "text/plain");
  
}

//upload config
function uploadCryptoDashConfig(){

  // define modal
  var uploadCryptoDashConfigModal = new bootstrap.Modal(document.getElementById('uploadCryptoDashConfigModal'))

  // show modal
  uploadCryptoDashConfigModal.show(uploadCryptoDashConfigModal);

  let CryptoDashConfigForm = document.querySelector("#uploadCryptoDashConfigForm");
  let CryptoDashConfigFile = document.querySelector("#uploadCryptoDashConfigInput");

  // listen to the submit button to trigger the upload handler
  CryptoDashConfigForm.addEventListener('submit', CryptoDashUploadHandler);

  function CryptoDashConfigProcessor (event) {
    let CryptoDashConfig = JSON.parse(event.target.result);
    
    window.localStorage.clear();
    Object.keys(CryptoDashConfig).forEach(function(value){

      window.localStorage.setItem(value, CryptoDashConfig[value]);

    });
    
    location.reload();

  }
  
  function CryptoDashUploadHandler (event) {

    // Stop the form from reloading the page
    event.preventDefault();

    // If there's no file, do nothing
    if (!CryptoDashConfigFile.value.length) return;

    // Create a new FileReader() object
    let CryptoDashFileReader = new FileReader();

    // Setup the callback event to run when the file is read
    CryptoDashFileReader.onload = CryptoDashConfigProcessor;

    // Read the file
    CryptoDashFileReader.readAsText(CryptoDashConfigFile.files[0]);

  }

}




function pullCryptoDashCoinList() {

  Toastify({
    text: ` <div class="toast-body bordered "> <p> Please wait while getting the list of coins from Crypto Compare. </p> </div> `
    
    ,
    duration: 3000,
    className: "tracker-backdrop-blur",
    newWindow: true,
    close: false,
    gravity: "top", // `top` or `bottom`
    position: "right", // `left`, `center` or `right`
    stopOnFocus: true, // Prevents dismissing of toast on hover
    escapeMarkup: false,
    
    style: {
      /*
      background: "linear-gradient(to right, #00b09b, #96c93d)",
      */
      boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
      borderRadius: "20px",
      
    },
    
    


    onClick: function(){} // Callback after click
  }).showToast();

  
  const myRequest = 'https://min-api.cryptocompare.com/data/all/coinlist';

  fetch(myRequest)
  .then(response => {
      const data = response.json();
     if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
     return data;
  })
  .then(data => {
      /* process your data further */

      var CryptoDashCoinListData = JSON.stringify(data);


      CryptoDashCoinsSelector.clear();
      CryptoDashCoinsSelector.clearOptions();
      CryptoDashCoinsSelector.refreshItems();

      for (var property in data['Data']) {
        //console.log(`${property}: ${data['Data'][property]['FullName']}`);

        if(data['Data'][property]['PlatformType'] === "blockchain" || data['Data'][property]['PlatformType'] === "token" ) {
          CryptoDashCoinsSelector.addOption({
            value: data['Data'][property]['Symbol'], text: data['Data'][property]['CoinName'],
            //value: data['Data'][property]['Symbol'], text: data['Data'][property]['Name'],
            //value: data['Data'][property]['Symbol'], text: data['Data'][property]['FullName'],
          });

          
          


        }
        //CryptoDashCoinsSelector.refreshItems();

        
      };

      var CryptoDashLayout = JSON.parse(window.localStorage.getItem('CryptoDashLayout'));

      if(CryptoDashLayout && CryptoDashLayout !== "[]") {
          
        for (var i = 0; i < CryptoDashLayout.length; i++) {
          var itemId = CryptoDashLayout[i];
          CryptoDashCoinsSelector.addItem(itemId);
        }
            
        CryptoDashCoinsSelector.refreshItems();
        CryptoDashGrid.layout(true);

        manualCryptoDashFetchTrackerData();

        updateCrpytoDashTrackerFontSize();
      }
      

      
      Toastify({
        text: ` <div class="toast-body bordered "> <p> List successfully pulled. </p> </div> `
        
        ,
        duration: 3000,
        className: "tracker-backdrop-blur",
        newWindow: true,
        close: false,
        gravity: "top", // `top` or `bottom`
        position: "right", // `left`, `center` or `right`
        stopOnFocus: true, // Prevents dismissing of toast on hover
        escapeMarkup: false,
        
        style: {
          /*
          background: "linear-gradient(to right, #00b09b, #96c93d)",
          */
          boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
          borderRadius: "20px",
          
        },
        
        onClick: function(){} // Callback after click
      }).showToast();


  })
  .catch(error => {
    console.error(error)
  
    Toastify({
      text: ` <div class="toast-body bordered "> <p>Error: ` + error + ` </p> </div> `
      
      ,
      duration: 10000,
      className: "tracker-backdrop-blur",
      newWindow: true,
      close: false,
      gravity: "top", // `top` or `bottom`
      position: "right", // `left`, `center` or `right`
      stopOnFocus: true, // Prevents dismissing of toast on hover
      escapeMarkup: false,
      
      style: {
        /*
        background: "linear-gradient(to right, #00b09b, #96c93d)",
        */
        boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
        borderRadius: "20px",
        
      },
  
      onClick: function(){} // Callback after click
    }).showToast();
  });


    

   

    //window.localStorage.removeItem('CryptoDashCoinListData');

    //window.localStorage.setItem('CryptoDashCoinListData', CryptoDashCoinListData );
    /*
    data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEPCT24HOUR']
    
   
*/
    

  

  //Symbol
  //CoinName
  //IsTrading (true) rule to add to the list
  //AssetWebsiteUrl 

    /*
    CryptoDashCoinsSelector.addOption({
      value: "BTC", text: "Bitcoin"

    })
    */


  




}



  
function CryptoDashNumberToPlainString(num) {
  return (''+ +num).replace(/(-?)(\d*)\.?(\d*)e([+-]\d+)/,
    function(a,b,c,d,e) {
      return e < 0
        ? b + '0.' + Array(1-e-c.length).join(0) + c + d
        : b + c + d + Array(e-d.length+1).join(0);
    });
}

function updateCrpytoDashTrackerFontSize() {
  document.querySelectorAll(".cryptodash-tracker").forEach((element) => {
    window.fitText( element, 1.2 );
  });
}



// Selecter from the tracker in the settings menu
var CryptoDashCoinsSelector = new TomSelect("#CryptoDashCoinsSelector",{
  plugins: ['remove_button'],
  create: false,
  // Find dynamic list of all coins based on all coin list from data source
 /* options: [
    { value: "BTC", text: "Bitcoin" },
    { value: "ETH", text: "Etherium" },
    { value: "XRP", text: "Ripple" },
    { value: "CAKE", text: "PancakeSwap" },
    { value: "DOGE", text: "Dodgecoin" },
    { value: "KAT", text: "Kambria" },
    { value: "SHIB", text: "Shiba Inu" },
    { value: "XMR", text: "Monero" },
  ], */
  searchField: ['text','value'],
  sortField: {
    field: 'text',
    direction: 'asc'
  },
  onItemAdd:function(value, item){
    this.setTextboxValue('');
    this.refreshOptions();
    createCryptoDashTracker(value);
    updateCrpytoDashTrackerFontSize();
    // console.log("changed Crypto Dash coin selection and added the " + value + " Tracker");
    //manualCryptoDashFetchTrackerData();
    Toastify({
      text: ` <div class="toast-body bordered "> <p>Added ` + value + ` tracker successfully. </p> </div> `
      
      ,
      duration: 3000,
      className: "tracker-backdrop-blur",
      newWindow: true,
      close: false,
      gravity: "top", // `top` or `bottom`
      position: "right", // `left`, `center` or `right`
      stopOnFocus: true, // Prevents dismissing of toast on hover
      escapeMarkup: false,
      
      style: {
        /*
        background: "linear-gradient(to right, #00b09b, #96c93d)",
        */
        boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
        borderRadius: "20px",
        
        
      },
      
      
  
  
      onClick: function(){} // Callback after click
    }).showToast();

  },
  onItemRemove:function(value){
    this.refreshOptions();
    removeCryptoDashTracker(value);
    //console.log("changed Crypto Dash coin selection and removed the " + value + " Tracker");
  },
  render:{
    option:function(data,escape){
    //console.log(data);
      return '<div class="d-flex"><span>' + escape(data.text) + ' (' + escape(data.value) + ')</span> </div>';
    },
    item:function(data,escape){
      return '<div>' + escape(data.text) + ' (' + escape(data.value) + ') </div>';
    }
  }
});

//pullCryptoDashCoinList();

// GRID

var CryptoDashGrid = new Muuri('.cryptodash-grid', {
  
  dragEnabled: true,
  layoutOnInit: false

}).on('move', function () {
  saveCryptoDashLayout(CryptoDashGrid);
});





var CryptoDashLayout = window.localStorage.getItem('CryptoDashLayout');
var CryptoDashTrackerWidth = window.localStorage.getItem('CryptoDashTrackerWidth');
var CryptoDashTrackerHeight = window.localStorage.getItem('CryptoDashTrackerHeight');


try {
  //adddlert("Welcome guest!");

  pullCryptoDashCoinList();

  




}
catch(error) {
  //document.getElementById("cryptodash-clock").innerHTML = error.message;

  console.log(error);


}



if (CryptoDashLayout) {
  loadCryptoDashLayout(CryptoDashGrid, CryptoDashLayout);

  if(CryptoDashLayout === "[]") {
    var CryptoDashRefreshButton = document.getElementById("cryptodash-refresh-button");
    var HideCryptoDashRefreshButton = document.createAttribute("hidden");
    
    CryptoDashRefreshButton.setAttributeNode(HideCryptoDashRefreshButton);

  } else {
    document.getElementById("cryptodash-refresh-button").removeAttribute("hidden");
    
  }

} else {
  CryptoDashGrid.layout(true);
}

if (CryptoDashTrackerWidth && CryptoDashTrackerHeight) {
  document.querySelectorAll(".cryptodash-tracker").forEach((element) => {
    element.style.width = CryptoDashTrackerWidth;
    element.style.height = CryptoDashTrackerHeight;
  });

  var itemSizeRanger = document.getElementById("itemSizeRanger");

  itemSizeRanger.value = CryptoDashTrackerWidth.substring(0, CryptoDashTrackerWidth.length - 2);
  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title; 
  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout(true);

} else {

  var itemSizeRanger = document.getElementById("itemSizeRanger");
  itemSizeRanger.value = 420;
  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title;

}


function serializeCryptoDashLayout(CryptoDashGrid) {
  var itemIds = CryptoDashGrid.getItems().map(function (item) {
    //console.log(item);
    return item.getElement().getAttribute('crypto-dash-id');
  });
  //console.log(JSON.stringify(itemIds));
  return JSON.stringify(itemIds);
}


function saveCryptoDashLayout(CryptoDashGrid) {
  var CryptoDashLayout = serializeCryptoDashLayout(CryptoDashGrid);
  window.localStorage.setItem('CryptoDashLayout', CryptoDashLayout);
  setCryptoDashConfigDate();
}


function loadCryptoDashLayout(CryptoDashGrid, serializedCryptoDashLayout){

  var CryptoDashLayout = JSON.parse(window.localStorage.getItem('CryptoDashLayout'));
          
  for (var i = 0; i < CryptoDashLayout.length; i++) {
    var itemId = CryptoDashLayout[i];
    CryptoDashCoinsSelector.addItem(itemId);
  }
          
  CryptoDashGrid.layout(true);
  
}



// dark and light mode
(function () {
  let CryptoDashLightSwitch = document.getElementById("CryptoDashLightSwitch");
  if (!CryptoDashLightSwitch) {
    return;
  }
  
  /**
   * @function darkmode
   * @summary: changes the theme to 'dark mode' and save settings to local stroage.
   * Basically, replaces/toggles every CSS class that has '-light' class with '-dark'
   */
  function darkMode() {
    document.querySelectorAll(".bg-light").forEach((element) => {
      element.className = element.className.replace(/-light/g, "-dark");
    });

    //document.body.classList.add("bg-dark");
    document.getElementById("cryptodash-settings-menu-close").classList.add("bg-light");
    document.getElementById("cryptodash-settings-menu-close").classList.remove("bg-dark");
    document.getElementById("cryptodash-settings-button").classList.add("btn-dark");
    document.getElementById("cryptodash-settings-button").classList.remove("btn-light");
    document.getElementById("cryptodash-refresh-button").classList.add("btn-dark");
    document.getElementById("cryptodash-refresh-button").classList.remove("btn-light");
    document.getElementById("cryptodash-clock").classList.add("btn-dark");
    document.getElementById("cryptodash-clock").classList.remove("btn-light");

    //reset config modal close button & modal
    document.getElementById("resetCryptoDashConfigModalClose").classList.add("bg-light");
    document.getElementById("resetCryptoDashConfigModalClose").classList.remove("bg-dark");
    document.getElementById("resetCryptoDashConfigModalContent").classList.add("bg-dark");
    document.getElementById("resetCryptoDashConfigModalContent").classList.remove("bg-light");
	  document.getElementById("manageCryptoDashCoinsModalContent").classList.add("bg-dark");
    document.getElementById("manageCryptoDashCoinsModalContent").classList.remove("bg-light");
	  document.getElementById("manageCryptoDashCoinsModalClose").classList.add("bg-light");
    document.getElementById("manageCryptoDashCoinsModalClose").classList.remove("bg-dark");
    document.getElementById("manageCryptoDashDataSourceModalClose").classList.add("bg-light");
    document.getElementById("manageCryptoDashDataSourceModalClose").classList.remove("bg-dark");
    
    document.getElementById("uploadCryptoDashConfigModalContent").classList.add("bg-dark");
    document.getElementById("uploadCryptoDashConfigModalContent").classList.remove("bg-light");
	  document.getElementById("uploadCryptoDashConfigModalClose").classList.add("bg-light");
    document.getElementById("uploadCryptoDashConfigModalClose").classList.remove("bg-dark");
    document.getElementById("uploadCryptoDashConfigInput").classList.add("text-light");
    document.getElementById("uploadCryptoDashConfigInput").classList.remove("text-dark");
    
    // update the select drop down
    document.querySelector('.ts-control').classList.add("bg-dark");
    //document.querySelector('.ts-dropdown').classList.add("bg-dark");
    document.getElementById("CryptoDashCoinsSelector-ts-control").classList.add("text-white");
    //document.querySelectorAll(".option:not(.active)").forEach((element) => {
    //  element.classList.add("text-black-50");
    //});

    //document.querySelector('body').style.setProperty('text-shadow', "0px 0px 2px #000");
      
    document.documentElement.style.setProperty('--frosted-bg-color', "rgba(0, 0, 0, 0.25)");
    document.documentElement.style.setProperty('--frosted-tracker-bg-color', "rgba(128, 128, 128, 0.25)");
    


    document.querySelectorAll(".btn-outline-dark").forEach((element) => {
      element.className = element.className.replace(/-dark/g, "-light");
    });

    document.querySelectorAll(".box-close-item").forEach((element) => {
      element.classList.add("btn-light");
      element.classList.remove("btn-dark");
    });

    if (document.body.classList.contains("text-dark")) {
      document.body.classList.replace("text-dark", "text-light");
    } else {
      document.body.classList.add("text-light");
    }
    
    

    // set light switch input to true
    if (! CryptoDashLightSwitch.checked) {
      CryptoDashLightSwitch.checked = true;
    }
    localStorage.setItem("CryptoDashLightSwitch", "dark");
    setCryptoDashConfigDate();
  }

  /**
   * @function lightmode
   * @summary: changes the theme to 'light mode' and save settings to local stroage.
   */
  function lightMode() {
    document.querySelectorAll(".bg-dark").forEach((element) => {
      element.className = element.className.replace(/-dark/g, "-light");
    });

    //document.body.classList.add("bg-light");
    document.getElementById("cryptodash-settings-button").classList.add("btn-light");
    document.getElementById("cryptodash-settings-button").classList.remove("btn-dark");
    document.getElementById("cryptodash-refresh-button").classList.add("btn-light");
    document.getElementById("cryptodash-refresh-button").classList.remove("btn-dark");
    document.getElementById("cryptodash-clock").classList.add("btn-light");
    document.getElementById("cryptodash-clock").classList.remove("btn-dark");
    document.getElementById("uploadCryptoDashConfigInput").classList.add("text-dark");
    document.getElementById("uploadCryptoDashConfigInput").classList.remove("text-light");

    // update the select drop down
    document.querySelector('.ts-control').classList.add("bg-light");
    //document.querySelector('.ts-dropdown').classList.add("bg-light");
    document.getElementById("CryptoDashCoinsSelector-ts-control").classList.add("text-dark");
    //document.querySelectorAll(".option:not(.active)").forEach((element) => {
    //  element.classList.add("text-dark");
    //});

    //document.querySelector('body').style.setProperty('text-shadow', "0px 0px 1px #000");

    document.documentElement.style.setProperty('--frosted-bg-color', "rgba(255, 255, 255, 0.50)");
    document.documentElement.style.setProperty('--frosted-tracker-bg-color', "rgba(255, 255, 255, 0.50)");

    document.querySelectorAll(".box-close-item").forEach((element) => {
      element.classList.add("btn-dark");
      element.classList.remove("btn-light");
    });

    document.querySelectorAll(".btn-outline-light").forEach((element) => {
      element.className = element.className.replace(/-light/g, "-dark");
    });
    

    if (document.body.classList.contains("text-light")) {
      document.body.classList.replace("text-light", "text-dark");
    } else {
      document.body.classList.add("text-dark");
    }
    
    

    if (CryptoDashLightSwitch.checked) {
      CryptoDashLightSwitch.checked = false;
    }
    window.localStorage.setItem("CryptoDashLightSwitch", "light");
    setCryptoDashConfigDate();
  }
  
  /**
   * @function onToggleMode
   * @summary: the event handler attached to the switch. calling @darkMode or @lightMode depending on the checked state.
   */
  function onToggleMode() {
    if (CryptoDashLightSwitch.checked) {
      darkMode();

    } else {
      lightMode();
    }
  }
  
  /**
   * @function getSystemDefaultTheme
   * @summary: get system default theme by media query
   */
  function getSystemDefaultTheme() {
    const darkThemeMq = window.matchMedia("(prefers-color-scheme: dark)");
    if (darkThemeMq.matches) {
      return "dark";
    }
    return "light";
  }

  function setup() {
    var settings = localStorage.getItem("CryptoDashLightSwitch");
    if (settings == null) {
      settings = getSystemDefaultTheme();
    }
    
    if (settings == "dark") {
      document.getElementById("cryptodash-settings-menu-close").classList.add("bg-light");
      CryptoDashLightSwitch.checked = true;
      

    }
    
    CryptoDashLightSwitch.addEventListener("change", onToggleMode);
    onToggleMode();
  }
  
  setup();
  
})();


// slider to change Auto Refresh
var autoRefreshRanger = document.getElementById("refreshRanger");

autoRefreshRanger.onchange = function() {
  autoRefreshRanger.title = autoRefreshRanger.value / 10;
  window.localStorage.setItem('CryptoDashAutoRefresh', autoRefreshRanger.value );
  document.getElementById("dataRefreshSpan").innerHTML = autoRefreshRanger.value / 10;
}

autoRefreshRanger.oninput = function() {
  
  // trigger the auto refresh function

  stopAutoCryptoDashFetchTrackerData();
  autoCryptoDashFetchTrackerData();
  autoRefreshRanger.title = autoRefreshRanger.value / 10;
  document.getElementById("dataRefreshSpan").innerHTML = autoRefreshRanger.value / 10;
  document.getElementById("cryptodash-refresh-button").innerHTML = `<i id ="cryptodash-refresh-icon" class="fa fa-refresh "></i> Auto`;
  
  
}


// Sldier to change width

var itemSizeRanger = document.getElementById("itemSizeRanger");



itemSizeRanger.onchange = function() {
  // update all trackers in dom with the updated size
  
  
  // update grid size info
  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title;

  

  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();

  window.localStorage.setItem('CryptoDashTrackerWidth', itemSizeRanger.value + "px");
  window.localStorage.setItem('CryptoDashTrackerHeight', itemSizeRanger.value + "px");
  setCryptoDashConfigDate();
  
}

itemSizeRanger.oninput = function() {
  
  document.querySelectorAll(".cryptodash-tracker").forEach((element) => {
    element.style.width = itemSizeRanger.value + "px";
    element.style.height = itemSizeRanger.value + "px";
  });

  itemSizeRanger.title = itemSizeRanger.value + 'px';
  document.getElementById("gridsizeSpan").innerHTML = itemSizeRanger.title;

  
  updateCrpytoDashTrackerFontSize(); 
   

  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();
}


function createCryptoDashTracker(coinAbr) {

  var CryptoDashContentTrackers = document.getElementById("CryptoDashContentTrackers");
  var CryptoDashLightSwitch = window.localStorage.getItem("CryptoDashLightSwitch");
  var Tracker = document.createElement("div");

  var TrackerItemContent = document.createElement("div");
  var TrackerItemContentIDAttribute = document.createAttribute("id");

  var TrackerItemContentTitle = document.createElement("H1");
  var TrackerNameIDAttribute = document.createAttribute("id");

  var TrackerAttribute = document.createAttribute("crypto-dash-id");

  var TrackerIDAttribute = document.createAttribute("id");

  var TrackerPrice = document.createElement("H2");
  var TrackerPriceIDAttribute = document.createAttribute("id");

  var TrackerHighestValue24 = document.createElement("p");
  var TrackerLowestValue24 = document.createElement("p");
  var TrackerHighestValue24IDAttribute = document.createAttribute("id");
  var TrackerLowestValue24IDAttribute = document.createAttribute("id");

  var TrackerHighestValueHour = document.createElement("p");
  var TrackerLowestValueHour = document.createElement("p");
  var TrackerHighestValueHourIDAttribute = document.createAttribute("id");
  var TrackerLowestValueHourIDAttribute = document.createAttribute("id");

  var TrackerChangeValue24 = document.createElement("p");
  var TrackerChangePCTValue24 = document.createElement("p");
  var TrackerChangeValue24IDAttribute = document.createAttribute("id");
  var TrackerChangePCTValue24IDAttribute = document.createAttribute("id");

  var TrackerChangeValueHour = document.createElement("p");
  var TrackerChangePCTValueHour = document.createElement("p");
  var TrackerChangeValueHourIDAttribute = document.createAttribute("id");
  var TrackerChangePCTValueHourIDAttribute = document.createAttribute("id");

  var TrackerImg = document.createElement("img");
  var TrackerImgIDAttribute = document.createAttribute("id");
  var TrackerImgSRCAttribute = document.createAttribute("src");
  //var TrackerImgClassAttribute = document.createAttribute("class");

  var TrackerUpdateTime = document.createElement("p");
  var TrackerUpdateTimeIDAttribute = document.createAttribute("id");


  Tracker.classList.add("cryptodash-tracker", "tracker-backdrop-blur");
  
  if(CryptoDashLightSwitch && CryptoDashLightSwitch === "dark") {
    Tracker.classList.add("bg-dark");
  } else {
    Tracker.classList.add("bg-light");
  }
  

  Tracker.classList.add("col");
  TrackerItemContent.classList.add("cryptodash-tracker-content");
  
  TrackerAttribute.value = coinAbr;
  TrackerIDAttribute.value = coinAbr;
  TrackerNameIDAttribute.value = coinAbr + "-name";
  TrackerItemContentIDAttribute.value = coinAbr + "-content";
  TrackerPriceIDAttribute.value = coinAbr + "-price";
  
  TrackerHighestValue24IDAttribute.value = coinAbr + "-high24";
  TrackerLowestValue24IDAttribute.value = coinAbr + "-low24";

  TrackerHighestValueHourIDAttribute.value = coinAbr + "-highhour";
  TrackerLowestValueHourIDAttribute.value = coinAbr + "-lowhour";

  TrackerChangeValue24IDAttribute.value = coinAbr + "-change24";
  TrackerChangePCTValue24IDAttribute.value = coinAbr + "-changepct24";

  TrackerChangeValueHourIDAttribute.value = coinAbr + "-changehour";
  TrackerChangePCTValueHourIDAttribute.value = coinAbr + "-changepcthour";

  TrackerImgIDAttribute.value = coinAbr + "-img";
  TrackerImgSRCAttribute.value = "";
  
  TrackerUpdateTimeIDAttribute.value = coinAbr + "-updatetime";

  Tracker.setAttributeNode(TrackerAttribute);
  Tracker.setAttributeNode(TrackerIDAttribute);

  TrackerItemContent.setAttributeNode(TrackerItemContentIDAttribute);
  TrackerItemContentTitle.setAttributeNode(TrackerNameIDAttribute);
  TrackerPrice.setAttributeNode(TrackerPriceIDAttribute);

  TrackerHighestValue24.setAttributeNode(TrackerHighestValue24IDAttribute);
  TrackerLowestValue24.setAttributeNode(TrackerLowestValue24IDAttribute);

  TrackerHighestValueHour.setAttributeNode(TrackerHighestValueHourIDAttribute);
  TrackerLowestValueHour.setAttributeNode(TrackerLowestValueHourIDAttribute);

  TrackerChangeValue24.setAttributeNode(TrackerChangeValue24IDAttribute);
  TrackerChangePCTValue24.setAttributeNode(TrackerChangePCTValue24IDAttribute);

  TrackerChangeValueHour.setAttributeNode(TrackerChangeValueHourIDAttribute);
  TrackerChangePCTValueHour.setAttributeNode(TrackerChangePCTValueHourIDAttribute);

  TrackerImg.setAttributeNode(TrackerImgIDAttribute);
  TrackerImg.setAttributeNode(TrackerImgSRCAttribute);
  //TrackerImg.setAttributeNode(TrackerImgClassAttribute);
  

  TrackerUpdateTime.setAttributeNode(TrackerUpdateTimeIDAttribute);

  TrackerItemContentTitle.innerText = coinAbr;
  
  TrackerItemContent.appendChild(TrackerItemContentTitle);
  TrackerItemContent.appendChild(TrackerPrice);
  TrackerItemContent.appendChild(TrackerHighestValue24);
  TrackerItemContent.appendChild(TrackerLowestValue24);
  TrackerItemContent.appendChild(TrackerHighestValueHour);
  TrackerItemContent.appendChild(TrackerLowestValueHour);
  TrackerItemContent.appendChild(TrackerChangeValue24);
  TrackerItemContent.appendChild(TrackerChangePCTValue24);
  TrackerItemContent.appendChild(TrackerChangeValueHour);
  TrackerItemContent.appendChild(TrackerChangePCTValueHour);
  TrackerItemContent.appendChild(TrackerImg);
  TrackerItemContent.appendChild(TrackerUpdateTime);

  Tracker.appendChild(TrackerItemContent);


  // add the Tracker to the screen 
  CryptoDashContentTrackers.appendChild(Tracker);
  CryptoDashGrid.add(Tracker);

  // get current Tracker size
  var CurrentCryptoDashTrackerWidth = window.localStorage.getItem('CryptoDashTrackerWidth');
  var CurrentCryptoDashTrackerHeight = window.localStorage.getItem('CryptoDashTrackerHeight');


  Tracker.style.width = CurrentCryptoDashTrackerWidth;
  Tracker.style.height = CurrentCryptoDashTrackerHeight;

  // reszie the Trackers to be the same size
  /*
  if (CurrentCryptoDashTrackerWidth && CurrentCryptoDashTrackerHeight) {
    document.querySelectorAll(".cryptodash-Tracker").forEach((element) => {
      element.style.width = CurrentCryptoDashTrackerWidth;
      element.style.height = CurrentCryptoDashTrackerHeight;
    });
  };
*/
  
  
  CryptoDashGrid.synchronize();
  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();
  saveCryptoDashLayout(CryptoDashGrid);
  
  // show refresh button
  document.getElementById("cryptodash-refresh-button").removeAttribute("hidden");
  //manualCryptoDashFetchTrackerData();

}

function removeCryptoDashTracker(coinAbr) {

  // get current layout and position of element
  var CurrentCryptoDashLayout = JSON.parse(window.localStorage.getItem('CryptoDashLayout'));
  var itemIndex = CurrentCryptoDashLayout.indexOf(coinAbr);

  // remove element from layout
  CurrentCryptoDashLayout.splice(itemIndex, 1);

  // save the updated layout
  var UpdatedCryptoDashLayout = JSON.stringify(CurrentCryptoDashLayout);
  window.localStorage.setItem('CryptoDashLayout', UpdatedCryptoDashLayout);

  // get the current Tracker
  var Tracker = document.getElementById(coinAbr);

  // remove Tracker from grid and dom
  CryptoDashGrid.remove(Tracker);
  Tracker.remove();
  
  // sync grid

  CryptoDashGrid.synchronize();
  CryptoDashGrid.refreshItems();
  CryptoDashGrid.layout();
  

  

}

// Get Data

//get interval
var refreshCryptoDashDataInterval = window.localStorage.getItem("CryptoDashAutoRefresh");

// if interval not available set 60 
if(!refreshCryptoDashDataInterval){
  window.localStorage.setItem('CryptoDashAutoRefresh', '60' );
}



var autoDataPull = null;

function autoCryptoDashFetchTrackerData(){

  var refreshCryptoDashDataInterval = autoRefreshRanger.value;
  autoDataPull = setInterval(manualCryptoDashFetchTrackerData, refreshCryptoDashDataInterval * 100);

  Toastify({
    text: ` <div class="toast-body bordered "> <p>Refreshing data automatically, every ` + refreshCryptoDashDataInterval / 10 + ` seconds. </p> </div> `
    
    ,
    duration: 3000,
    className: "tracker-backdrop-blur",
    newWindow: true,
    close: false,
    gravity: "top", // `top` or `bottom`
    position: "right", // `left`, `center` or `right`
    stopOnFocus: true, // Prevents dismissing of toast on hover
    escapeMarkup: false,
    
    style: {
      /*
      background: "linear-gradient(to right, #00b09b, #96c93d)",
      */
      boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
      borderRadius: "20px",
      
    },
    
    


    onClick: function(){} // Callback after click
  }).showToast();
  document.getElementById("cryptodash-refresh-button").innerHTML = `<i id ="cryptodash-refresh-icon" class="fa fa-refresh "></i> Auto`;
} 



async function manualCryptoDashFetchTrackerData() {

  var CryptoDashRefreshButton = document.getElementById('cryptodash-refresh-button');
  document.getElementById('cryptodash-refresh-icon').classList.add("fa-spin");
  
  var CryptoDashtrackerInfo = JSON.parse(window.localStorage.getItem('CryptoDashLayout'));

  // get the API key from local storage 
  // api key stored when interracting with data source
  var apiKey="123";

  console.log("this is the apikey: " + apiKey);

   Toastify({
    text: ` <div class="toast-body bordered "> <p>Refreshing... </p> </div> `
    
    ,
    duration: 3000,
    className: "tracker-backdrop-blur",
    newWindow: true,
    close: false,
    gravity: "top", // `top` or `bottom`
    position: "right", // `left`, `center` or `right`
    stopOnFocus: true, // Prevents dismissing of toast on hover
    escapeMarkup: false,
    
    style: {
      /*
      background: "linear-gradient(to right, #00b09b, #96c93d)",
      */
      boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
      borderRadius: "20px",
      
    },
    
    


    onClick: function(){} // Callback after click
  }).showToast();




  if(!CryptoDashtrackerInfo) {
    console.log("Nothing is tracked");
  } else if(CryptoDashtrackerInfo === "[]") {
    console.log("Nothing is tracked");
  } else {


    

    // mapping the array with the tracker info
  
    var preparedCryptoDashtrackerInfo = CryptoDashtrackerInfo.map(function(value) {
      return value;
    }).join(',');
    
  
    // to define 
    var priceCurrency = "USD,EUR,GBP";
    
    
    try {
     
      const response = await fetch('https://min-api.cryptocompare.com/data/pricemultifull?fsyms=' + preparedCryptoDashtrackerInfo + '&tsyms=' + priceCurrency)
      //https://min-api.cryptocompare.com/data/price?fsym=BTC&tsyms=USD
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();

      var CryptoDashData = JSON.stringify(data);

      window.localStorage.removeItem('CryptoDashData');

      window.localStorage.setItem('CryptoDashData', CryptoDashData );
      /*
      var mycoin =  "BTC";
      var mycurrency = "EUR";
      var mycoinquery = "data.DISPLAY." + mycoin + "." + mycurrency + ".PRICE"; // nu returneaza
      */
      
      
      //console.log(mycoins);
      
      //console.log(data[DISPLAY]);
      //console.log(data.DISPLAY.BTC.EUR.PRICE); // returneaza

      // imi trebuie sa iau moneda si currency dinamic, in functie de ce am eu de afisat
      
      //console.log(JSON.parse(CryptoDashData));

      document.querySelectorAll(".cryptodash-tracker").forEach((element) => {

        //let mycoin = "BTC";
        //var mycurrency = "GBP";
        //const mycoins = data['DISPLAY'][mycoin][mycurrency]['PRICE'];


        var cryptoDashTrackerID = element.getAttribute('crypto-dash-id');
        //var CurrentTracker = document.getElementById(cryptoDashTrackerID);

        var CryptoDashCurrency = window.localStorage.getItem('CryptoDashCurrency');
        
        document.getElementById(cryptoDashTrackerID + "-price").innerHTML = data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['PRICE'];
        //TrackerPrice.innerText = data['DISPLAY'][cryptoDashTrackerID][mycurrency]['PRICE'];
        //CurrentTracker.firstChild.appendChild(TrackerPrice);
        
      

      

        //document.getElementById(cryptoDashTrackerID + "-high24").innerHTML = "24 Hour High: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['HIGH24HOUR'];
       // document.getElementById(cryptoDashTrackerID + "-low24").innerHTML = "24 Hour Low: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['LOW24HOUR'];
        //document.getElementById(cryptoDashTrackerID + "-highhour").innerHTML = "Last Hour High: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['HIGHHOUR'];
       // document.getElementById(cryptoDashTrackerID + "-lowhour").innerHTML = "Last Hour Low: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['LOWHOUR'];
        
        //document.getElementById(cryptoDashTrackerID + "-change24").innerHTML = "Change in last 24 Hours: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGE24HOUR'];
        document.getElementById(cryptoDashTrackerID + "-changepct24").innerHTML = "24 Hours: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEPCT24HOUR'] + " %";
        //document.getElementById(cryptoDashTrackerID + "-changehour").innerHTML = "Change in last Hour: " + BigNumber(data['RAW'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEHOUR']);
        document.getElementById(cryptoDashTrackerID + "-changepcthour").innerHTML = "Hour: " + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEPCTHOUR'] + " %";


        
        /*
        if (cryptoDashTrackerID === "SHIB") {
          window.localStorage.setItem("Test", data['RAW'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEHOUR']);
        }
        
        */

        var CryptoDashDataSourceURL = "https://www.cryptocompare.com" + data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['IMAGEURL'];

        var CurrentCryptoDashTracker = document.getElementById(cryptoDashTrackerID);

        var CryptoDashTrackerImg = document.getElementById(cryptoDashTrackerID + "-img");
        CryptoDashTrackerImg.src = CryptoDashDataSourceURL;
        
        var CryptoDashTracker = document.getElementById(cryptoDashTrackerID);
        CryptoDashTracker.style.backgroundImage = 'url(\"' + CryptoDashDataSourceURL + '\")';
        CryptoDashTracker.style.opacity = '1';

        var unixTimestamp = data['RAW'][cryptoDashTrackerID][CryptoDashCurrency]['LASTUPDATE'];
        var lastupdate = new Date(unixTimestamp*1000);
        var showlastupdate = lastupdate.getDate() + "-" +(lastupdate.getMonth()+1)+ "-" +lastupdate.getFullYear() + " " + lastupdate.toLocaleTimeString();
        

        document.getElementById(cryptoDashTrackerID + "-updatetime").innerHTML = showlastupdate;
        


        if (Math.sign(data['DISPLAY'][cryptoDashTrackerID][CryptoDashCurrency]['CHANGEPCTHOUR']) > 0) {
          // Positive
          CryptoDashTrackerImg.classList.remove("cryptodash-negative");
          CryptoDashTrackerImg.classList.add("cryptodash-positive");
        } else {
          // Negative
          CryptoDashTrackerImg.classList.remove("cryptodash-positive");
          CryptoDashTrackerImg.classList.add("cryptodash-negative");

        }

      
      });


    } catch(e) {
      console.log(e);

      Toastify({
        text: ` <div class="toast-body bordered "> <p>Error: ` + e + ` </p> </div> `
        
        ,
        duration: 10000,
        className: "tracker-backdrop-blur",
        newWindow: true,
        close: false,
        gravity: "top", // `top` or `bottom`
        position: "right", // `left`, `center` or `right`
        stopOnFocus: true, // Prevents dismissing of toast on hover
        escapeMarkup: false,
        
        style: {
          /*
          background: "linear-gradient(to right, #00b09b, #96c93d)",
          */
          boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
          borderRadius: "20px",
          
        },
        
        
    
    
        onClick: function(){} // Callback after click
      }).showToast();



    }

    //return data;

  };

  document.getElementById('cryptodash-refresh-icon').classList.remove("fa-spin");
  
}


function stopAutoCryptoDashFetchTrackerData() {
  clearInterval(autoDataPull);

}

// Data auto refresh switch
(function () {
  let CryptoDashDataRefreshSwitch = document.getElementById("CryptoDashDataRefreshSwitch");
  if (!CryptoDashDataRefreshSwitch) {
    return;
  }

  function autoRefresh() {
    document.getElementById("refreshRanger").removeAttribute("disabled");
    if (CryptoDashDataRefreshSwitch.checked) {
      CryptoDashDataRefreshSwitch.checked = true;
    }
    window.localStorage.setItem("CryptoDashDataRefreshSwitch", "Auto");

    
    var autoRefreshRanger = document.getElementById("refreshRanger");
    document.getElementById("dataRefreshSpan").innerHTML = autoRefreshRanger.value / 10;

    var CryptoDashAutoRefresh = window.localStorage.getItem('CryptoDashAutoRefresh');

    if (CryptoDashAutoRefresh) {
      
      autoRefreshRanger.value = CryptoDashAutoRefresh;
      // trigger the data pull with auto refresh
      autoCryptoDashFetchTrackerData();

      document.getElementById("dataRefreshSpan").innerHTML = CryptoDashAutoRefresh / 10;

    } else {
      autoRefreshRanger.value = 0;
      autoRefreshRanger.title = autoRefreshRanger.value;
      document.getElementById("dataRefreshSpan").innerHTML = "N/A";
    }
    
  }

  function manualRefresh() {

    document.getElementById("refreshRanger").disabled = true;

    if (CryptoDashDataRefreshSwitch.checked) {
      CryptoDashDataRefreshSwitch.checked = false;
    }
    localStorage.setItem("CryptoDashDataRefreshSwitch", "Manual");
    document.getElementById("dataRefreshSpan").innerHTML = "N/A"; 
    stopAutoCryptoDashFetchTrackerData();
  }

  function onToggleMode() {
    if (CryptoDashDataRefreshSwitch.checked) {
      autoRefresh();
    } else {
      manualRefresh();
    }
  }

  function setup() {
    var settings = window.localStorage.getItem("CryptoDashDataRefreshSwitch");
    if (settings == null) {
      window.localStorage.setItem("CryptoDashDataRefreshSwitch", "Manual");
    }
    
    if (settings == "Auto") {
      CryptoDashDataRefreshSwitch.checked = true;
    }
    
    CryptoDashDataRefreshSwitch.addEventListener("change", onToggleMode);
    onToggleMode();
  }
  
  setup();

})();


// CryptoDash Currency selector
(function () {

  var CryptoDashCurrencyUSD = document.getElementById("cryptodash-currency-usd");
  var CryptoDashCurrencyEUR = document.getElementById("cryptodash-currency-eur");
  var CryptoDashCurrencyGBP = document.getElementById("cryptodash-currency-gbp");

  if (!CryptoDashCurrencyUSD || !CryptoDashCurrencyEUR || !CryptoDashCurrencyGBP) {
    return;
  }

  function USDToggle() {
    if (CryptoDashCurrencyUSD.checked) {
      window.localStorage.setItem("CryptoDashCurrency", "USD");
      CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");
      manualCryptoDashFetchTrackerData();

      Toastify({
        text: ` <div class="toast-body bordered "> <p>Currency set to USD. </p> </div> `,
        duration: 3000,
        className: "tracker-backdrop-blur",
        newWindow: true,
        close: false,
        gravity: "top", // `top` or `bottom`
        position: "right", // `left`, `center` or `right`
        stopOnFocus: true, // Prevents dismissing of toast on hover
        escapeMarkup: false,
        
        style: {
          boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
          borderRadius: "20px",
        },
    
        onClick: function(){} // Callback after click
      }).showToast();


    }
  }

  function EURToggle() {
    if (CryptoDashCurrencyEUR.checked) {
      window.localStorage.setItem("CryptoDashCurrency", "EUR");
      CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");
      manualCryptoDashFetchTrackerData();


      Toastify({
        text: ` <div class="toast-body bordered "> <p>Currency set to EUR. </p> </div> `,
        duration: 3000,
        className: "tracker-backdrop-blur",
        newWindow: true,
        close: false,
        gravity: "top", // `top` or `bottom`
        position: "right", // `left`, `center` or `right`
        stopOnFocus: true, // Prevents dismissing of toast on hover
        escapeMarkup: false,
        
        style: {
          boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
          borderRadius: "20px",
        },
    
        onClick: function(){} // Callback after click
      }).showToast();

    }
  }

  function GBPToggle() {
    if (CryptoDashCurrencyGBP.checked) {
      window.localStorage.setItem("CryptoDashCurrency", "GBP");
      CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");
      manualCryptoDashFetchTrackerData();

      Toastify({
        text: ` <div class="toast-body bordered "> <p>Currency set to GBP. </p> </div> `,
        duration: 3000,
        className: "tracker-backdrop-blur",
        newWindow: true,
        close: false,
        gravity: "top", // `top` or `bottom`
        position: "right", // `left`, `center` or `right`
        stopOnFocus: true, // Prevents dismissing of toast on hover
        escapeMarkup: false,
        
        style: {
          boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
          borderRadius: "20px",
        },
    
        onClick: function(){} // Callback after click
      }).showToast();
    }
  }


  function setup() {
    var CryptoDashCurrency = window.localStorage.getItem("CryptoDashCurrency");

    if (CryptoDashCurrency == null) {
      window.localStorage.setItem("CryptoDashCurrency", "USD");
    }
    
    if (CryptoDashCurrency == "USD") {
      CryptoDashCurrencyUSD.checked = true;
    }

    if (CryptoDashCurrency == "EUR") {
      CryptoDashCurrencyEUR.checked = true;
    }

    if (CryptoDashCurrency == "GBP") {
      CryptoDashCurrencyGBP.checked = true;
    }
    
    CryptoDashCurrencyUSD.addEventListener("change", USDToggle);
    CryptoDashCurrencyEUR.addEventListener("change", EURToggle);
    CryptoDashCurrencyGBP.addEventListener("change", GBPToggle);

    USDToggle();
  }
  
  setup();


})();


// CryptoDash Background Selector

(function () {


  function GradientHD() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "GradientHD");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-image-gradient-hd");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random';
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';

  }

  function Gradient4K() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "Gradient4K");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-image-gradient-4k");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }

  function AbstractHD() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "AbstractHD");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-image-abstract-hd");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.add("active");
    
    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }

  function Abstract4K() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "Abstract4K");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd");
    document.querySelector("body").classList.add("cryptodash-bg-image-abstract-4k");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.add("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';    
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
  }


  function SimpleColor() {
    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", "Simple");

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-simple");

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.add("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = '<i class="fa fa-check"></i> Default Colors';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = 'Random Colors';    
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }

  function CustomColor() {

    const hexColorCode = [ 0,	1, 2,	3,	4,	5,	6,	7,	8,	9, "a", "b", "c", "d", "e", "f"];

    const getRandomArray = () => {
      return Math.floor(Math.random() * hexColorCode.length);
    };

    let hexColorName = "#";

    for (let i = 0; i < 6; i++) {
      hexColorName += hexColorCode[getRandomArray()];
    }

    // Set localStorage background info
    window.localStorage.setItem("CryptoDashBackground", hexColorName);

    // Change body class with selected background
    document.querySelector("body").classList.remove("cryptodash-bg-simple", "cryptodash-bg-custom", "cryptodash-bg-image-gradient-hd", "cryptodash-bg-image-gradient-4k", "cryptodash-bg-image-abstract-hd", "cryptodash-bg-image-abstract-4k");
    document.querySelector("body").classList.add("cryptodash-bg-custom");

    document.documentElement.style.setProperty('--cryptodash-main-bg-color', hexColorName);

    // Change tab button status
    document.getElementById("cryptodash-bg-simple-button").classList.add("active");
    document.getElementById("cryptodash-bg-gradient-button").classList.remove("active");
    document.getElementById("cryptodash-bg-abstract-button").classList.remove("active");

    // Change tab status
    document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
    document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
    document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");
    
    // Change tab background button status
    document.getElementById("cryptodash-bg-simple-color").innerHTML = 'Default';
    document.getElementById("cryptodash-bg-custom-color").innerHTML = '<i class="fa fa-check"></i> Random (' + hexColorName + ')';    
    document.getElementById("cryptodash-bg-gradient-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '4K (3840x2160)';
    document.getElementById("cryptodash-bg-abstract-hd").innerHTML = 'HD (1920x1080)';
    document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '4K (3840x2160)';
  }



  function setup() {
    var CryptoDashBackground = window.localStorage.getItem("CryptoDashBackground");
    var CryptoDashBGGradientHD = document.getElementById("cryptodash-bg-gradient-hd");
    var CryptoDashBGGradient4K = document.getElementById("cryptodash-bg-gradient-4k");
    var CryptoDashBGAbstractHD = document.getElementById("cryptodash-bg-abstract-hd");
    var CryptoDashBGAbstract4K = document.getElementById("cryptodash-bg-abstract-4k");
    var CryptoDashBGCustomColor = document.getElementById("cryptodash-bg-custom-color");
    var CryptoDashBGSimpleColor = document.getElementById("cryptodash-bg-simple-color");
    
    var checkhex = /^#([0-9a-f]{3}){1,2}$/i;

    if (CryptoDashBackground == null) {
      window.localStorage.setItem("CryptoDashBackground", "Simple");
      SimpleColor();
    }

    
    
    if (CryptoDashBackground == "GradientHD") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-gradient-hd");
      document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

      document.getElementById("cryptodash-bg-gradient-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    }

    if (CryptoDashBackground == "Gradient4K") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-gradient-4k");
      document.getElementById("cryptodash-bg-gradient-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

      document.getElementById("cryptodash-bg-gradient-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
    }

    if (CryptoDashBackground == "AbstractHD") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-abstract-hd");
      document.getElementById("cryptodash-bg-abstract-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");
      
      document.getElementById("cryptodash-bg-abstract-hd").innerHTML = '<i class="fa fa-check"></i> HD (1920x1080)';
    }

    if (CryptoDashBackground == "Abstract4K") {
      // Change body class with selected background
      document.querySelector("body").classList.add("cryptodash-bg-image-abstract-4k");
      document.getElementById("cryptodash-bg-abstract-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-button").classList.remove("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.add("active", "show");

      document.getElementById("cryptodash-bg-abstract-4k").innerHTML = '<i class="fa fa-check"></i> 4K (3840x2160)';
    }

    if (CryptoDashBackground == "Simple") {
      // Change body class with selected background 
      document.querySelector("body").classList.add("cryptodash-bg-simple");
      document.getElementById("cryptodash-bg-simple-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-simple-color").innerHTML = '<i class="fa fa-check"></i> Default';

    } 
    
    if (checkhex.test(CryptoDashBackground)) {
      // Change body class with selected background 
      document.querySelector("body").classList.add("cryptodash-bg-custom");

      /*
      CryptoDashBackground

      --cryptodash-main-bg-color: #282537;
      --cryptodash-gradient-bg-color-1: #3c3b52;
      --cryptodash-gradient-bg-color-2: #252233;
      */

      document.documentElement.style.setProperty('--cryptodash-main-bg-color', CryptoDashBackground);

      document.getElementById("cryptodash-bg-simple-button").classList.add("active");
      document.getElementById("cryptodash-bg-simple-tab").classList.add("active", "show");
      document.getElementById("cryptodash-bg-gradient-tab").classList.remove("active", "show");
      document.getElementById("cryptodash-bg-abstract-tab").classList.remove("active", "show");

      document.getElementById("cryptodash-bg-custom-color").innerHTML = '<i class="fa fa-check"></i> Random (' + CryptoDashBackground + ')';    

    }


    CryptoDashBGCustomColor.addEventListener("click", CustomColor);
    CryptoDashBGSimpleColor.addEventListener("click", SimpleColor);

    CryptoDashBGGradientHD.addEventListener("click", GradientHD);
    CryptoDashBGGradient4K.addEventListener("click", Gradient4K);
    CryptoDashBGAbstractHD.addEventListener("click", AbstractHD);
    CryptoDashBGAbstract4K.addEventListener("click", Abstract4K);
    
    
    //Gradient4K();
    

  }
  setup();

})();






// window erorr 

/*
window.onerror = function(msg, url, line, col, error) {
  // Note that col & error are new to the HTML 5 spec and may not be 
  // supported in every browser.  It worked for me in Chrome.
  var extra = !col ? '' : '\ncolumn: ' + col;
  extra += !error ? '' : '\nerror: ' + error;

  // You can view the information in an alert to see things working like this:
  alert("Error: " + msg + "\nurl: " + url + "\nline: " + line + extra);


  Toastify({
    text: ` <div class="toast-body bordered "> <p>Error: ` + msg + `</p> </div> `,
    duration: 10000,
    className: "tracker-backdrop-blur",
    newWindow: true,
    close: false,
    gravity: "top", // `top` or `bottom`
    position: "right", // `left`, `center` or `right`
    stopOnFocus: true, // Prevents dismissing of toast on hover
    escapeMarkup: false,
    
    style: {
      boxShadow: "0px 0px 30px 5px rgba(0, 0, 0, 0.3),0px 0px 10px -30px rgba(0, 0, 0, 0.3),0px 0px 6px 3px rgba(0, 0, 0, 0.2)",
      borderRadius: "20px",
    },

    onClick: function(){} // Callback after click
  }).showToast();


  // TODO: Report this error via ajax so you can keep track
  //       of what pages have JS issues

  var suppressErrorAlert = true;
  // If you return true, then error alerts (like in older versions of 
  // Internet Explorer) will be suppressed.
  return suppressErrorAlert;
};
*/


/* Font resize 
https://github.com/adactio/FitText.js
*/

(function(){

  var addEvent = function (el, type, fn) {
    if (el.addEventListener)
      el.addEventListener(type, fn, false);
		else
			el.attachEvent('on'+type, fn);
  };
  
  var extend = function(obj,ext){
    for(var key in ext)
      if(ext.hasOwnProperty(key))
        obj[key] = ext[key];
    return obj;
  };

  window.fitText = function (el, kompressor, options) {

    var settings = extend({
      'minFontSize' : -1/0,
      'maxFontSize' : 1/0
    },options);

    var fit = function (el) {
      var compressor = kompressor || 1;

      var resizer = function () {
        el.style.fontSize = Math.max(Math.min(el.clientWidth / (compressor*10), parseFloat(settings.maxFontSize)), parseFloat(settings.minFontSize)) + 'px';
      };

      // Call once to set.
      resizer();

      // Bind events
      // If you have any js library which support Events, replace this part
      // and remove addEvent function (or use original jQuery version)
      addEvent(window, 'resize', resizer);
      addEvent(window, 'orientationchange', resizer);
    };

    if (el.length)
      for(var i=0; i<el.length; i++)
        fit(el[i]);
    else
      fit(el);

    // return set of elements
    return el;
  };
})();


updateCrpytoDashTrackerFontSize();




</script>

</html>
